<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Preserve folder structures | NCEAS Data Team Reference Guide</title>
  <meta name="description" content="This is a training guide and reference resource for NCEAS data team members working on the SASAP and Arctic Data Center projects" />
  <meta name="generator" content="bookdown 0.36.2 and GitBook 2.6.7" />

  <meta property="og:title" content="Preserve folder structures | NCEAS Data Team Reference Guide" />
  <meta property="og:type" content="book" />
  
  <meta property="og:description" content="This is a training guide and reference resource for NCEAS data team members working on the SASAP and Arctic Data Center projects" />
  <meta name="github-repo" content="NCEAS/datateam-training" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Preserve folder structures | NCEAS Data Team Reference Guide" />
  
  <meta name="twitter:description" content="This is a training guide and reference resource for NCEAS data team members working on the SASAP and Arctic Data Center projects" />
  



<meta name="date" content="2023-12-01" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  <link rel="shortcut icon" href="favicon.ico" type="image/x-icon" />
<link rel="prev" href="show-indexing-status.html"/>
<link rel="next" href="update-a-package-with-a-new-data-object.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  background-color: #f8f8f8; }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ef2929; } /* Alert */
code span.an { color: #8f5902; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #204a87; } /* Attribute */
code span.bn { color: #0000cf; } /* BaseN */
code span.cf { color: #204a87; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4e9a06; } /* Char */
code span.cn { color: #8f5902; } /* Constant */
code span.co { color: #8f5902; font-style: italic; } /* Comment */
code span.cv { color: #8f5902; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #8f5902; font-weight: bold; font-style: italic; } /* Documentation */
code span.dt { color: #204a87; } /* DataType */
code span.dv { color: #0000cf; } /* DecVal */
code span.er { color: #a40000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #0000cf; } /* Float */
code span.fu { color: #204a87; font-weight: bold; } /* Function */
code span.im { } /* Import */
code span.in { color: #8f5902; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #204a87; font-weight: bold; } /* Keyword */
code span.op { color: #ce5c00; font-weight: bold; } /* Operator */
code span.ot { color: #8f5902; } /* Other */
code span.pp { color: #8f5902; font-style: italic; } /* Preprocessor */
code span.sc { color: #ce5c00; font-weight: bold; } /* SpecialChar */
code span.ss { color: #4e9a06; } /* SpecialString */
code span.st { color: #4e9a06; } /* String */
code span.va { color: #000000; } /* Variable */
code span.vs { color: #4e9a06; } /* VerbatimString */
code span.wa { color: #8f5902; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
  
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
</style>

<link rel="stylesheet" href="../styles.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Data Team Reference Guide</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>About</a></li>
<li class="chapter" data-level="" data-path="miscellaneous.html"><a href="miscellaneous.html"><i class="fa fa-check"></i>Miscellaneous</a>
<ul>
<li class="chapter" data-level="" data-path="code-snippets.html"><a href="code-snippets.html"><i class="fa fa-check"></i>Code Snippets</a></li>
<li class="chapter" data-level="" data-path="file-paths.html"><a href="file-paths.html"><i class="fa fa-check"></i>File paths</a>
<ul>
<li class="chapter" data-level="" data-path="file-paths.html"><a href="file-paths.html#remote-files-vs.-local-files"><i class="fa fa-check"></i>Remote files vs. local files</a></li>
<li class="chapter" data-level="" data-path="file-paths.html"><a href="file-paths.html#file-path-shortcuts"><i class="fa fa-check"></i>File path shortcuts</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="metacat-version.html"><a href="metacat-version.html"><i class="fa fa-check"></i>Metacat version</a></li>
<li class="chapter" data-level="" data-path="resources-for-r.html"><a href="resources-for-r.html"><i class="fa fa-check"></i>Resources for R</a>
<ul>
<li class="chapter" data-level="" data-path="resources-for-r.html"><a href="resources-for-r.html#learning"><i class="fa fa-check"></i>Learning</a></li>
<li class="chapter" data-level="" data-path="resources-for-r.html"><a href="resources-for-r.html#packages"><i class="fa fa-check"></i>Packages</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="" data-path="edit-data-packages.html"><a href="edit-data-packages.html"><i class="fa fa-check"></i>Edit data packages</a>
<ul>
<li class="chapter" data-level="" data-path="datapack-background.html"><a href="datapack-background.html"><i class="fa fa-check"></i>datapack Background</a>
<ul>
<li class="chapter" data-level="" data-path="datapack-background.html"><a href="datapack-background.html#navigating-data-packages"><i class="fa fa-check"></i>Navigating data packages</a></li>
<li class="chapter" data-level="" data-path="datapack-background.html"><a href="datapack-background.html#data-objects"><i class="fa fa-check"></i>Data Objects</a></li>
<li class="chapter" data-level="" data-path="datapack-background.html"><a href="datapack-background.html#provenance"><i class="fa fa-check"></i>Provenance</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="create-a-new-data-package.html"><a href="create-a-new-data-package.html"><i class="fa fa-check"></i>Create a new data package</a>
<ul>
<li class="chapter" data-level="" data-path="create-a-new-data-package.html"><a href="create-a-new-data-package.html#upload-new-data-files"><i class="fa fa-check"></i>Upload new data files</a></li>
<li class="chapter" data-level="" data-path="create-a-new-data-package.html"><a href="create-a-new-data-package.html#upload-the-package"><i class="fa fa-check"></i>Upload the package</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="update-packages-with-datapack.html"><a href="update-packages-with-datapack.html"><i class="fa fa-check"></i>Update packages with datapack</a>
<ul>
<li class="chapter" data-level="" data-path="update-packages-with-datapack.html"><a href="update-packages-with-datapack.html#get-the-package"><i class="fa fa-check"></i>Get the package</a></li>
<li class="chapter" data-level="" data-path="update-packages-with-datapack.html"><a href="update-packages-with-datapack.html#update-the-metadata"><i class="fa fa-check"></i>Update the metadata</a></li>
<li class="chapter" data-level="" data-path="update-packages-with-datapack.html"><a href="update-packages-with-datapack.html#modify-the-data-files"><i class="fa fa-check"></i>Modify the data files</a></li>
<li class="chapter" data-level="" data-path="update-packages-with-datapack.html"><a href="update-packages-with-datapack.html#publish-update"><i class="fa fa-check"></i>Publish update</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="add-a-pre-generated-identifier-to-the-eml.html"><a href="add-a-pre-generated-identifier-to-the-eml.html"><i class="fa fa-check"></i>Add a pre-generated identifier to the EML</a></li>
<li class="chapter" data-level="" data-path="edit-sysmeta.html"><a href="edit-sysmeta.html"><i class="fa fa-check"></i>Edit sysmeta</a>
<ul>
<li class="chapter" data-level="" data-path="edit-sysmeta.html"><a href="edit-sysmeta.html#identifiers-and-sysmeta"><i class="fa fa-check"></i>Identifiers and sysmeta</a></li>
<li class="chapter" data-level="" data-path="edit-sysmeta.html"><a href="edit-sysmeta.html#additional-resources"><i class="fa fa-check"></i>Additional resources</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="obsolescence-chain.html"><a href="obsolescence-chain.html"><i class="fa fa-check"></i>Obsolescence chain</a></li>
<li class="chapter" data-level="" data-path="set-dataone-nodes.html"><a href="set-dataone-nodes.html"><i class="fa fa-check"></i>Set DataONE nodes</a>
<ul>
<li class="chapter" data-level="" data-path="set-dataone-nodes.html"><a href="set-dataone-nodes.html#staging-test-nodes"><i class="fa fa-check"></i>Staging (Test) nodes</a></li>
<li class="chapter" data-level="" data-path="set-dataone-nodes.html"><a href="set-dataone-nodes.html#production-nodes"><i class="fa fa-check"></i>Production nodes</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="set-rights-and-access.html"><a href="set-rights-and-access.html"><i class="fa fa-check"></i>Set rights and access</a>
<ul>
<li class="chapter" data-level="" data-path="set-rights-and-access.html"><a href="set-rights-and-access.html#my-profile"><i class="fa fa-check"></i>My profile</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="show-indexing-status.html"><a href="show-indexing-status.html"><i class="fa fa-check"></i>Show indexing status</a></li>
<li class="chapter" data-level="" data-path="preserve-folder-structures.html"><a href="preserve-folder-structures.html"><i class="fa fa-check"></i>Preserve folder structures</a>
<ul>
<li class="chapter" data-level="" data-path="preserve-folder-structures.html"><a href="preserve-folder-structures.html#download-the-zip-file-to-datateam"><i class="fa fa-check"></i>Download the zip file to datateam</a></li>
<li class="chapter" data-level="" data-path="preserve-folder-structures.html"><a href="preserve-folder-structures.html#re-upload-the-contents-to-the-arctic-data-center"><i class="fa fa-check"></i>Re-upload the contents to the Arctic Data Center</a></li>
<li class="chapter" data-level="" data-path="preserve-folder-structures.html"><a href="preserve-folder-structures.html#summary"><i class="fa fa-check"></i>Summary</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="update-a-package-with-a-new-data-object.html"><a href="update-a-package-with-a-new-data-object.html"><i class="fa fa-check"></i>Update a package with a new data object</a>
<ul>
<li class="chapter" data-level="" data-path="update-a-package-with-a-new-data-object.html"><a href="update-a-package-with-a-new-data-object.html#publish-update-1"><i class="fa fa-check"></i>Publish update</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="update-an-object.html"><a href="update-an-object.html"><i class="fa fa-check"></i>Update an object</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="explore-eml.html"><a href="explore-eml.html"><i class="fa fa-check"></i>Explore EML</a>
<ul>
<li class="chapter" data-level="" data-path="access-specific-elements.html"><a href="access-specific-elements.html"><i class="fa fa-check"></i>Access specific elements</a></li>
<li class="chapter" data-level="" data-path="navigate-through-eml.html"><a href="navigate-through-eml.html"><i class="fa fa-check"></i>Navigate through EML</a></li>
<li class="chapter" data-level="" data-path="understand-the-eml-schema.html"><a href="understand-the-eml-schema.html"><i class="fa fa-check"></i>Understand the EML schema</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="edit-eml.html"><a href="edit-eml.html"><i class="fa fa-check"></i>Edit EML</a>
<ul>
<li class="chapter" data-level="" data-path="edit-an-eml-element.html"><a href="edit-an-eml-element.html"><i class="fa fa-check"></i>Edit an EML element</a>
<ul>
<li class="chapter" data-level="" data-path="edit-an-eml-element.html"><a href="edit-an-eml-element.html#edit-eml-with-strings"><i class="fa fa-check"></i>Edit EML with strings</a></li>
<li class="chapter" data-level="" data-path="edit-an-eml-element.html"><a href="edit-an-eml-element.html#edit-eml-with-the-eml-package"><i class="fa fa-check"></i>Edit EML with the “EML” package</a></li>
<li class="chapter" data-level="" data-path="edit-an-eml-element.html"><a href="edit-an-eml-element.html#edit-eml-with-objects"><i class="fa fa-check"></i>Edit EML with objects</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="edit-attributelists.html"><a href="edit-attributelists.html"><i class="fa fa-check"></i>Edit attributeLists</a>
<ul>
<li class="chapter" data-level="" data-path="edit-attributelists.html"><a href="edit-attributelists.html#edit-attributes"><i class="fa fa-check"></i>Edit attributes</a></li>
<li class="chapter" data-level="" data-path="edit-attributelists.html"><a href="edit-attributelists.html#edit-custom-units"><i class="fa fa-check"></i>Edit custom units</a></li>
<li class="chapter" data-level="" data-path="edit-attributelists.html"><a href="edit-attributelists.html#edit-factors"><i class="fa fa-check"></i>Edit factors</a></li>
<li class="chapter" data-level="" data-path="edit-attributelists.html"><a href="edit-attributelists.html#finalize-attributelist"><i class="fa fa-check"></i>Finalize attributeList</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="edit-custom-units-1.html"><a href="edit-custom-units-1.html"><i class="fa fa-check"></i>Edit custom units</a></li>
<li class="chapter" data-level="" data-path="edit-datatables.html"><a href="edit-datatables.html"><i class="fa fa-check"></i>Edit dataTables</a></li>
<li class="chapter" data-level="" data-path="edit-otherentities.html"><a href="edit-otherentities.html"><i class="fa fa-check"></i>Edit otherEntities</a>
<ul>
<li class="chapter" data-level="" data-path="edit-otherentities.html"><a href="edit-otherentities.html#remove-otherentities"><i class="fa fa-check"></i>Remove otherEntities</a></li>
<li class="chapter" data-level="" data-path="edit-otherentities.html"><a href="edit-otherentities.html#create-otherentities"><i class="fa fa-check"></i>Create otherEntities</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="semantic-annotations.html"><a href="semantic-annotations.html"><i class="fa fa-check"></i>Semantic annotations</a>
<ul>
<li class="chapter" data-level="" data-path="semantic-annotations.html"><a href="semantic-annotations.html#how-annotations-are-used"><i class="fa fa-check"></i>How annotations are used</a></li>
<li class="chapter" data-level="" data-path="semantic-annotations.html"><a href="semantic-annotations.html#how-to-add-an-annotation"><i class="fa fa-check"></i>How to add an annotation</a></li>
<li class="chapter" data-level="" data-path="semantic-annotations.html"><a href="semantic-annotations.html#dataset-annotations"><i class="fa fa-check"></i>Dataset Annotations</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="edit-spatial-data.html"><a href="edit-spatial-data.html"><i class="fa fa-check"></i>Edit spatial data</a>
<ul>
<li class="chapter" data-level="" data-path="edit-spatial-data.html"><a href="edit-spatial-data.html#reading-spatial-files"><i class="fa fa-check"></i>Reading Spatial Files</a></li>
<li class="chapter" data-level="" data-path="edit-spatial-data.html"><a href="edit-spatial-data.html#spatialvector"><i class="fa fa-check"></i>spatialVector</a></li>
<li class="chapter" data-level="" data-path="edit-spatial-data.html"><a href="edit-spatial-data.html#spatialrasters"><i class="fa fa-check"></i>spatialRasters</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="format-text-in-eml.html"><a href="format-text-in-eml.html"><i class="fa fa-check"></i>Format text in EML</a>
<ul>
<li class="chapter" data-level="" data-path="format-text-in-eml.html"><a href="format-text-in-eml.html#type-setting"><i class="fa fa-check"></i>Type-setting</a></li>
<li class="chapter" data-level="" data-path="format-text-in-eml.html"><a href="format-text-in-eml.html#links"><i class="fa fa-check"></i>Links</a></li>
<li class="chapter" data-level="" data-path="format-text-in-eml.html"><a href="format-text-in-eml.html#lists"><i class="fa fa-check"></i>Lists</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="series-identifier-sid.html"><a href="series-identifier-sid.html"><i class="fa fa-check"></i>Series Identifier (SID)</a>
<ul>
<li class="chapter" data-level="" data-path="series-identifier-sid.html"><a href="series-identifier-sid.html#adding-a-sid-to-a-package"><i class="fa fa-check"></i>Adding a SID to a package</a></li>
<li class="chapter" data-level="" data-path="series-identifier-sid.html"><a href="series-identifier-sid.html#updating-the-child-packages-of-a-parent-package-with-a-sid"><i class="fa fa-check"></i>Updating the child packages of a parent package with a SID</a></li>
<li class="chapter" data-level="" data-path="series-identifier-sid.html"><a href="series-identifier-sid.html#updating-the-metadata-of-a-package-with-a-sid"><i class="fa fa-check"></i>Updating the metadata of a package with a SID</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="set-coverages.html"><a href="set-coverages.html"><i class="fa fa-check"></i>Set coverages</a>
<ul>
<li class="chapter" data-level="" data-path="set-coverages.html"><a href="set-coverages.html#set-multiple-coverages"><i class="fa fa-check"></i>Set multiple coverages</a></li>
<li class="chapter" data-level="" data-path="set-coverages.html"><a href="set-coverages.html#special-coverages"><i class="fa fa-check"></i>Special coverages</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="set-methods.html"><a href="set-methods.html"><i class="fa fa-check"></i>Set methods</a>
<ul>
<li class="chapter" data-level="" data-path="set-methods.html"><a href="set-methods.html#adding-sampling-info-to-methods-section"><i class="fa fa-check"></i>Adding sampling info to methods section</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="set-parties.html"><a href="set-parties.html"><i class="fa fa-check"></i>Set parties</a></li>
<li class="chapter" data-level="" data-path="set-physical.html"><a href="set-physical.html"><i class="fa fa-check"></i>Set physical</a></li>
<li class="chapter" data-level="" data-path="set-the-project-section.html"><a href="set-the-project-section.html"><i class="fa fa-check"></i>Set the project section</a></li>
<li class="chapter" data-level="" data-path="use-references.html"><a href="use-references.html"><i class="fa fa-check"></i>Use references</a>
<ul>
<li class="chapter" data-level="" data-path="use-references.html"><a href="use-references.html#example-with-parties"><i class="fa fa-check"></i>Example with parties</a></li>
<li class="chapter" data-level="" data-path="use-references.html"><a href="use-references.html#example-with-attributes"><i class="fa fa-check"></i>Example with attributes</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="" data-path="pi-correspondence.html"><a href="pi-correspondence.html"><i class="fa fa-check"></i>PI correspondence</a>
<ul>
<li class="chapter" data-level="" data-path="email-templates.html"><a href="email-templates.html"><i class="fa fa-check"></i>Email templates</a>
<ul>
<li class="chapter" data-level="" data-path="email-templates.html"><a href="email-templates.html#initial-email-template"><i class="fa fa-check"></i>Initial email template</a></li>
<li class="chapter" data-level="" data-path="email-templates.html"><a href="email-templates.html#comment-templates-based-on-what-is-missing"><i class="fa fa-check"></i>Comment templates based on what is missing</a></li>
<li class="chapter" data-level="" data-path="email-templates.html"><a href="email-templates.html#final-email-templates"><i class="fa fa-check"></i>Final email templates</a></li>
<li class="chapter" data-level="" data-path="email-templates.html"><a href="email-templates.html#additional-email-templates"><i class="fa fa-check"></i>Additional email templates</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="pi-faq-email-templates.html"><a href="pi-faq-email-templates.html"><i class="fa fa-check"></i>PI FAQ email templates</a>
<ul>
<li class="chapter" data-level="" data-path="pi-faq-email-templates.html"><a href="pi-faq-email-templates.html#data-1"><i class="fa fa-check"></i>Data</a></li>
<li class="chapter" data-level="" data-path="pi-faq-email-templates.html"><a href="pi-faq-email-templates.html#access"><i class="fa fa-check"></i>Access</a></li>
<li class="chapter" data-level="" data-path="pi-faq-email-templates.html"><a href="pi-faq-email-templates.html#scope"><i class="fa fa-check"></i>Scope</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="good-examples-of-data-packages.html"><a href="good-examples-of-data-packages.html"><i class="fa fa-check"></i>Good Examples of data packages</a></li>
<li class="chapter" data-level="" data-path="final-checklist.html"><a href="final-checklist.html"><i class="fa fa-check"></i>Final Checklist</a>
<ul>
<li class="chapter" data-level="" data-path="final-checklist.html"><a href="final-checklist.html#special-datasets"><i class="fa fa-check"></i>Special Datasets</a></li>
<li class="chapter" data-level="" data-path="final-checklist.html"><a href="final-checklist.html#system-metadata"><i class="fa fa-check"></i>System Metadata</a></li>
<li class="chapter" data-level="" data-path="final-checklist.html"><a href="final-checklist.html#general-eml"><i class="fa fa-check"></i>General EML</a></li>
<li class="chapter" data-level="" data-path="final-checklist.html"><a href="final-checklist.html#title-1"><i class="fa fa-check"></i>Title</a></li>
<li class="chapter" data-level="" data-path="final-checklist.html"><a href="final-checklist.html#abstract-1"><i class="fa fa-check"></i>Abstract</a></li>
<li class="chapter" data-level="" data-path="final-checklist.html"><a href="final-checklist.html#datatable-otherentity-spatialvectors"><i class="fa fa-check"></i>DataTable / OtherEntity / SpatialVectors</a></li>
<li class="chapter" data-level="" data-path="final-checklist.html"><a href="final-checklist.html#people"><i class="fa fa-check"></i>People</a></li>
<li class="chapter" data-level="" data-path="final-checklist.html"><a href="final-checklist.html#geographic-region"><i class="fa fa-check"></i>Geographic region</a></li>
<li class="chapter" data-level="" data-path="final-checklist.html"><a href="final-checklist.html#project"><i class="fa fa-check"></i>Project</a></li>
<li class="chapter" data-level="" data-path="final-checklist.html"><a href="final-checklist.html#methods-1"><i class="fa fa-check"></i>Methods</a></li>
<li class="chapter" data-level="" data-path="final-checklist.html"><a href="final-checklist.html#check-eml-version"><i class="fa fa-check"></i>Check EML Version</a></li>
<li class="chapter" data-level="" data-path="final-checklist.html"><a href="final-checklist.html#access-1"><i class="fa fa-check"></i>Access</a></li>
<li class="chapter" data-level="" data-path="final-checklist.html"><a href="final-checklist.html#sftp-files"><i class="fa fa-check"></i>SFTP Files</a></li>
<li class="chapter" data-level="" data-path="final-checklist.html"><a href="final-checklist.html#updated-datasets"><i class="fa fa-check"></i>Updated datasets</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="initial-review-checklist.html"><a href="initial-review-checklist.html"><i class="fa fa-check"></i>Initial review checklist</a></li>
<li class="chapter" data-level="" data-path="large-file-transfer.html"><a href="large-file-transfer.html"><i class="fa fa-check"></i>Large file transfer</a>
<ul>
<li class="chapter" data-level="" data-path="large-file-transfer.html"><a href="large-file-transfer.html#sftp"><i class="fa fa-check"></i>sFTP</a></li>
<li class="chapter" data-level="" data-path="large-file-transfer.html"><a href="large-file-transfer.html#globus-endpoint"><i class="fa fa-check"></i>Globus Endpoint</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="navigate-rt.html"><a href="navigate-rt.html"><i class="fa fa-check"></i>Navigate RT</a>
<ul>
<li class="chapter" data-level="" data-path="navigate-rt.html"><a href="navigate-rt.html#front-page"><i class="fa fa-check"></i>Front page</a></li>
<li class="chapter" data-level="" data-path="navigate-rt.html"><a href="navigate-rt.html#all-tickets"><i class="fa fa-check"></i>All tickets</a></li>
<li class="chapter" data-level="" data-path="navigate-rt.html"><a href="navigate-rt.html#example-ticket"><i class="fa fa-check"></i>Example ticket</a></li>
<li class="chapter" data-level="" data-path="navigate-rt.html"><a href="navigate-rt.html#new-data-submission"><i class="fa fa-check"></i>New data submission</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="replicate-datasets.html"><a href="replicate-datasets.html"><i class="fa fa-check"></i>Replicate Datasets</a>
<ul>
<li class="chapter" data-level="" data-path="replicate-datasets.html"><a href="replicate-datasets.html#cloning-the-packages"><i class="fa fa-check"></i>Cloning the packages</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="" data-path="miscellaneous-file-types.html"><a href="miscellaneous-file-types.html"><i class="fa fa-check"></i>Miscellaneous file types</a>
<ul>
<li class="chapter" data-level="" data-path="convert-excel-file-to-csv.html"><a href="convert-excel-file-to-csv.html"><i class="fa fa-check"></i>Convert Excel file to CSV</a></li>
<li class="chapter" data-level="" data-path="datalogger-files.html"><a href="datalogger-files.html"><i class="fa fa-check"></i>Datalogger files</a></li>
<li class="chapter" data-level="" data-path="netcdfs.html"><a href="netcdfs.html"><i class="fa fa-check"></i>NetCDFs</a></li>
<li class="chapter" data-level="" data-path="reorganize-files-on-the-server.html"><a href="reorganize-files-on-the-server.html"><i class="fa fa-check"></i>Reorganize files on the server</a>
<ul>
<li class="chapter" data-level="" data-path="reorganize-files-on-the-server.html"><a href="reorganize-files-on-the-server.html#basics"><i class="fa fa-check"></i>Basics</a></li>
<li class="chapter" data-level="" data-path="reorganize-files-on-the-server.html"><a href="reorganize-files-on-the-server.html#rename-file-based-on-file-path"><i class="fa fa-check"></i>Rename file based on file path</a></li>
<li class="chapter" data-level="" data-path="reorganize-files-on-the-server.html"><a href="reorganize-files-on-the-server.html#unzip-files"><i class="fa fa-check"></i>Unzip files</a></li>
<li class="chapter" data-level="" data-path="reorganize-files-on-the-server.html"><a href="reorganize-files-on-the-server.html#zip-shapefiles"><i class="fa fa-check"></i>Zip shapefiles</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="scan-rar-files.html"><a href="scan-rar-files.html"><i class="fa fa-check"></i>Scan rar files</a></li>
<li class="chapter" data-level="" data-path="spatial-data.html"><a href="spatial-data.html"><i class="fa fa-check"></i>Spatial data</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="wrangle-data.html"><a href="wrangle-data.html"><i class="fa fa-check"></i>Wrangle data</a>
<ul>
<li class="chapter" data-level="" data-path="clean-column-names.html"><a href="clean-column-names.html"><i class="fa fa-check"></i>Clean column names</a></li>
<li class="chapter" data-level="" data-path="fix-excel-dates.html"><a href="fix-excel-dates.html"><i class="fa fa-check"></i>Fix Excel dates</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="solr-queries.html"><a href="solr-queries.html"><i class="fa fa-check"></i>Solr queries</a>
<ul>
<li class="chapter" data-level="" data-path="construct-a-query.html"><a href="construct-a-query.html"><i class="fa fa-check"></i>Construct a query</a></li>
<li class="chapter" data-level="" data-path="query-solr-via-a-browser.html"><a href="query-solr-via-a-browser.html"><i class="fa fa-check"></i>Query Solr via a browser</a></li>
<li class="chapter" data-level="" data-path="query-solr-via-r.html"><a href="query-solr-via-r.html"><i class="fa fa-check"></i>Query Solr via R</a></li>
<li class="chapter" data-level="" data-path="use-facets.html"><a href="use-facets.html"><i class="fa fa-check"></i>Use facets</a></li>
<li class="chapter" data-level="" data-path="use-stats.html"><a href="use-stats.html"><i class="fa fa-check"></i>Use stats</a></li>
<li class="chapter" data-level="" data-path="example-solr-queries.html"><a href="example-solr-queries.html"><i class="fa fa-check"></i>Example Solr queries</a>
<ul>
<li class="chapter" data-level="" data-path="example-solr-queries.html"><a href="example-solr-queries.html#find-everything"><i class="fa fa-check"></i>Find everything</a></li>
<li class="chapter" data-level="" data-path="example-solr-queries.html"><a href="example-solr-queries.html#query-a-wildcard-expression"><i class="fa fa-check"></i>Query a wildcard expression</a></li>
<li class="chapter" data-level="" data-path="example-solr-queries.html"><a href="example-solr-queries.html#query-multiple-fields"><i class="fa fa-check"></i>Query multiple fields</a></li>
<li class="chapter" data-level="" data-path="example-solr-queries.html"><a href="example-solr-queries.html#query-by-formattype"><i class="fa fa-check"></i>Query by formatType</a></li>
<li class="chapter" data-level="" data-path="example-solr-queries.html"><a href="example-solr-queries.html#query-pids-by-a-specific-submitter"><i class="fa fa-check"></i>Query pids by a specific submitter</a></li>
<li class="chapter" data-level="" data-path="example-solr-queries.html"><a href="example-solr-queries.html#query-pids-with-special-characters"><i class="fa fa-check"></i>Query pids with special characters</a></li>
<li class="chapter" data-level="" data-path="example-solr-queries.html"><a href="example-solr-queries.html#query-multiple-conditions-within-one-field"><i class="fa fa-check"></i>Query multiple conditions within one field</a></li>
<li class="chapter" data-level="" data-path="example-solr-queries.html"><a href="example-solr-queries.html#query-for-latest-versions-only"><i class="fa fa-check"></i>Query for latest versions only</a></li>
<li class="chapter" data-level="" data-path="example-solr-queries.html"><a href="example-solr-queries.html#use-not-in-a-query"><i class="fa fa-check"></i>Use NOT in a query</a></li>
<li class="chapter" data-level="" data-path="example-solr-queries.html"><a href="example-solr-queries.html#query-a-coordinating-node"><i class="fa fa-check"></i>Query a coordinating node</a></li>
<li class="chapter" data-level="" data-path="example-solr-queries.html"><a href="example-solr-queries.html#query-for-emls-that-document-a-specific-data-pid"><i class="fa fa-check"></i>Query for EMLs that document a specific data pid</a></li>
<li class="chapter" data-level="" data-path="example-solr-queries.html"><a href="example-solr-queries.html#query-for-files-uploaded-during-a-specific-time"><i class="fa fa-check"></i>Query for files uploaded during a specific time</a></li>
<li class="chapter" data-level="" data-path="example-solr-queries.html"><a href="example-solr-queries.html#use-facets-1"><i class="fa fa-check"></i>Use facets</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="more-resources.html"><a href="more-resources.html"><i class="fa fa-check"></i>More resources</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="adc-web-submissions.html"><a href="adc-web-submissions.html"><i class="fa fa-check"></i>ADC web submissions</a>
<ul>
<li class="chapter" data-level="" data-path="add-physicals-to-submissions.html"><a href="add-physicals-to-submissions.html"><i class="fa fa-check"></i>Add physicals to submissions</a></li>
<li class="chapter" data-level="" data-path="assess-attributes.html"><a href="assess-attributes.html"><i class="fa fa-check"></i>Assess attributes</a></li>
<li class="chapter" data-level="" data-path="list-submissions-to-the-arctic-data-center.html"><a href="list-submissions-to-the-arctic-data-center.html"><i class="fa fa-check"></i>List submissions to the Arctic Data Center</a></li>
<li class="chapter" data-level="" data-path="recover-failed-submissions.html"><a href="recover-failed-submissions.html"><i class="fa fa-check"></i>Recover failed submissions</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="data-portals.html"><a href="data-portals.html"><i class="fa fa-check"></i>Data Portals</a>
<ul>
<li class="chapter" data-level="" data-path="customizing-data-portals.html"><a href="customizing-data-portals.html"><i class="fa fa-check"></i>Customizing Data Portals</a>
<ul>
<li class="chapter" data-level="" data-path="customizing-data-portals.html"><a href="customizing-data-portals.html#my-portals"><i class="fa fa-check"></i>My portals</a></li>
<li class="chapter" data-level="" data-path="customizing-data-portals.html"><a href="customizing-data-portals.html#creating-data-filters"><i class="fa fa-check"></i>Creating Data Filters</a></li>
<li class="chapter" data-level="" data-path="customizing-data-portals.html"><a href="customizing-data-portals.html#advanced-portal-customizations"><i class="fa fa-check"></i>Advanced portal customizations</a></li>
<li class="chapter" data-level="" data-path="customizing-data-portals.html"><a href="customizing-data-portals.html#updating-portals"><i class="fa fa-check"></i>Updating portals</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="distributed-biological-observatory-dbo-submissions.html"><a href="distributed-biological-observatory-dbo-submissions.html"><i class="fa fa-check"></i>Distributed Biological Observatory (DBO) submissions</a></li>
<li class="chapter" data-level="" data-path="mosaic.html"><a href="mosaic.html"><i class="fa fa-check"></i>MOSAiC</a>
<ul>
<li class="chapter" data-level="" data-path="mosaic.html"><a href="mosaic.html#dataset-level-annotations"><i class="fa fa-check"></i>Dataset Level Annotations</a></li>
<li class="chapter" data-level="" data-path="mosaic.html"><a href="mosaic.html#portal-updates"><i class="fa fa-check"></i>Portal updates</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="" data-path="using-arcticdatautils.html"><a href="using-arcticdatautils.html"><i class="fa fa-check"></i>Using arcticdatautils</a>
<ul>
<li class="chapter" data-level="" data-path="create-a-resource-map-using-arcticdatautils.html"><a href="create-a-resource-map-using-arcticdatautils.html"><i class="fa fa-check"></i>Create a resource map using arcticdatautils</a></li>
<li class="chapter" data-level="" data-path="get-package-and-eml.html"><a href="get-package-and-eml.html"><i class="fa fa-check"></i>Get package and EML</a></li>
<li class="chapter" data-level="" data-path="publish-an-object.html"><a href="publish-an-object.html"><i class="fa fa-check"></i>Publish an object</a></li>
<li class="chapter" data-level="" data-path="reorder-entities.html"><a href="reorder-entities.html"><i class="fa fa-check"></i>Reorder entities</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="nesting-data.html"><a href="nesting-data.html"><i class="fa fa-check"></i>Nesting Data</a>
<ul>
<li class="chapter" data-level="" data-path="nesting-a-data-package.html"><a href="nesting-a-data-package.html"><i class="fa fa-check"></i>Nesting a data package</a></li>
<li class="chapter" data-level="" data-path="add-children-to-an-existing-parent.html"><a href="add-children-to-an-existing-parent.html"><i class="fa fa-check"></i>Add children to an existing parent</a></li>
<li class="chapter" data-level="" data-path="create-a-new-parent-package.html"><a href="create-a-new-parent-package.html"><i class="fa fa-check"></i>Create a new parent package</a></li>
<li class="chapter" data-level="" data-path="example.html"><a href="example.html"><i class="fa fa-check"></i>Example</a></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://nceas.github.io/datateam-training/training/" target="blank">Training</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">NCEAS Data Team Reference Guide</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="preserve-folder-structures" class="section level2 hasAnchor">
<h2>Preserve folder structures<a href="preserve-folder-structures.html#preserve-folder-structures" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Sometimes, researchers will upload zip files that a contain nested file and folder structure that we would like to maintain. This reference section will walk you through how to re-upload the contents of the zip file to the Arctic Data Center such that the files and folders are preserved. Note that changing the locations of the files within the package can be tricky, so take these steps with care and try to make sure it is done correctly.</p>
<p>With that, here are the steps assuming that the PI has uploaded one zip file to their dataset. You may need to modify the steps for other scenarios, but if you are not sure, feel free to ask the data coordinator. In particular, tar files (.tgz) or rar files (.rar) are also compressed archives that might be better to unpack using command line tools.</p>
<div id="download-the-zip-file-to-datateam" class="section level3 hasAnchor">
<h3>Download the zip file to datateam<a href="preserve-folder-structures.html#download-the-zip-file-to-datateam" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>First, we will download the file, using R.</p>
<ol style="list-style-type: decimal">
<li>Navigate to the dataset landing page on the Arctic Data Center</li>
<li>Right click the “download” button next to the zip file</li>
<li>Select “copy link address”</li>
<li>Run the following two lines of code to set the URL variable, and extract the pid</li>
</ol>
<p>Here is an example on the test site. Note that on production, you will need to change the URL that you are substituting in the second line of code.</p>
<div class="sourceCode" id="cb50"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb50-1"><a href="preserve-folder-structures.html#cb50-1" tabindex="-1"></a><span class="fu">library</span>(magrittr)</span>
<span id="cb50-2"><a href="preserve-folder-structures.html#cb50-2" tabindex="-1"></a>url <span class="ot">&lt;-</span> <span class="st">&quot;https://test.arcticdata.io/metacat/d1/mn/v2/object/urn%3Auuid%3A48c0e669-fd8a-4875-acfd-e8933bb350ed&quot;</span></span>
<span id="cb50-3"><a href="preserve-folder-structures.html#cb50-3" tabindex="-1"></a>pid <span class="ot">&lt;-</span> <span class="fu">gsub</span>(<span class="st">&quot;https://test.arcticdata.io/metacat/d1/mn/v2/object/&quot;</span>, <span class="st">&quot;&quot;</span>, url) <span class="sc">%&gt;%</span>  <span class="fu">gsub</span>(<span class="st">&quot;%3A&quot;</span>, <span class="st">&quot;:&quot;</span>, .)</span></code></pre></div>
<ol start="5" style="list-style-type: decimal">
<li>Download the file</li>
</ol>
<p>Note that this will download the file to the location you specify as the second argument in <code>writeBin</code>. If you are organizing your scripts and data by submitter, it would look like the example below.</p>
<div class="sourceCode" id="cb51"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb51-1"><a href="preserve-folder-structures.html#cb51-1" tabindex="-1"></a><span class="fu">writeBin</span>(<span class="fu">getObject</span>(d1c<span class="sc">@</span>mn, pid), <span class="st">&quot;~/Submitter/example.zip&quot;</span>)</span></code></pre></div>
<ol start="6" style="list-style-type: decimal">
<li>Unzip the file into your submitter directory.</li>
</ol>
<div class="sourceCode" id="cb52"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb52-1"><a href="preserve-folder-structures.html#cb52-1" tabindex="-1"></a><span class="fu">unzip</span>(<span class="st">&quot;~/Submitter/example.zip&quot;</span>, <span class="at">exdir =</span> <span class="st">&quot;~/Submitter&quot;</span>)</span></code></pre></div>
<ol start="7" style="list-style-type: decimal">
<li>Delete the zip file (example.zip)</li>
</ol>
<p>Now if you look at the directory, you shuold see the unzipped contents of the file in a subdirectory of <code>~/Submitter</code>. The name of the directory will be the name of the folder the PI created the archive from.</p>
<p>Right now, you should stop and examine each file in the directory closely (or each type of file). You may need to make some minor adjustments or ask for clarification from the PI. For example, we still may need to ask for csv versions of excel files, you may need to re-zip certain directories (for example: a zip which contains 5 different sets of shapefiles should be turned into 5 different zips). Evaluate the contents of the directory alongside the data coordinator.</p>
</div>
<div id="re-upload-the-contents-to-the-arctic-data-center" class="section level3 hasAnchor">
<h3>Re-upload the contents to the Arctic Data Center<a href="preserve-folder-structures.html#re-upload-the-contents-to-the-arctic-data-center" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Once you have confirmed everything is all good, we can upload the files to the ADC while preserving the directory structure.</p>
<p>First, get the data package loaded into your R session as usual. I recommend not attempting any EML edits while you do these steps, this update adding the files is best done on it’s own, and EML edits can be done on the next version.</p>
<div class="sourceCode" id="cb53"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb53-1"><a href="preserve-folder-structures.html#cb53-1" tabindex="-1"></a>dp <span class="ot">&lt;-</span> <span class="fu">getDataPackage</span>(d1c, <span class="st">&quot;identifier&quot;</span>)</span></code></pre></div>
<p>Next, we will set up two types of paths describing each of the objects. The first will be an absolute path, so we can be sure the R function finds the files. The second will be a relative path, which will be what shows up on the landing page (or in the download all result) of the data package.</p>
<div class="warning">
<p>
If you don’t know the difference between an absolute and relative
path, read on. It is SUPER IMPORTANT!
</p>
<p>
A path is a location of a file or folder on a computer. There are two
types of paths in computing: absolute paths and relative paths.
</p>
<p>
An absolute path always starts with the root of your file system and
locates files from there. The absolute path to my example submitter zip
is: <code>/home/jclark/Submitter/example.zip</code>. The generic
shortcut <code>~/</code> is often used to replace the location of your
home directory (<code>/home/username</code>) to save typing, but your
path is still an absolute path if it starts with <code>~/</code>. Note
that a relative path will <strong>always</strong> start with either
<code>~/</code> or <code>/</code>.
</p>
<p>
Relative paths start from some location in your file system that is
below the root. Relative paths are combined with the path of that
location to locate files on your system. R (and some other languages
like MATLAB) refer to the location where the relative path starts as our
working directory. If our working directory is set to
<code>~/Submitter</code>, the relative path to the zip would be just
<code>example.zip</code>. Note that a relative path will
<strong>never</strong> start with either <code>~/</code> or
<code>/</code>.
</p>
</div>
<p>Getting these paths right is very important because we don’t want submitters to download a folder of data, and have the paths look like <code>/home/internname/ticket_27341/important_folder/important_file.csv</code>. The first part of that path is particular to however the person processing the ticket organized the data, and is not how the submitter of the data intented to organize the data. Follow the steps below to make sure this does not happen.</p>
<ol style="list-style-type: decimal">
<li><p>get a list of absolute paths for each file in the directory. <strong>NOTE</strong> The “PI_dir_name” here represents whatever directory you retrieved after running <code>unzip</code> in the previous step. The actual .zip file should not be in this directory.</p></li>
<li><p>get a list of relative paths for each file in the directory. Note this is the same command, but with the argument <code>full.names</code> set to <code>FALSE</code>.</p></li>
</ol>
<div class="sourceCode" id="cb54"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb54-1"><a href="preserve-folder-structures.html#cb54-1" tabindex="-1"></a>abs_paths <span class="ot">&lt;-</span> <span class="fu">list.files</span>(<span class="st">&quot;~/Submitter&quot;</span>, <span class="at">full.names =</span> <span class="cn">TRUE</span>, <span class="at">recursive =</span> <span class="cn">TRUE</span>)</span>
<span id="cb54-2"><a href="preserve-folder-structures.html#cb54-2" tabindex="-1"></a>rel_paths <span class="ot">&lt;-</span> <span class="fu">list.files</span>(<span class="st">&quot;~/Submitter&quot;</span>, <span class="at">full.names =</span> <span class="cn">FALSE</span>, <span class="at">recursive =</span> <span class="cn">TRUE</span>)</span></code></pre></div>
<div class="warning">
<p>
Make sure that these paths look correct! They should contain ONLY the
files that were unzipped. If you have other scripts or metadata files
you might want to rearrange your directories to get the correct paths.
The relative paths should start with the submitter’s directory name. In
this example they will look like the below:
</p>
<p>
<code>“final_image_set/level1.png” “final_image_set/photos/level2_1.png” “final_image_set/photos/level2_2.png”</code>
</p>
</div>
<p>Now for each of these files, we can create a <code>dataObject</code> for them and add them to the package using a loop. Before running this, look at the values of your <code>abs_paths</code> and <code>rel_paths</code> and make sure they look correct based on what you know about both paths and the structure of the directory. Within this loop we will also create otherEntities for each item, just putting in the bare minimum of information that will help us make sure that we know what files are what.</p>
<div class="sourceCode" id="cb55"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb55-1"><a href="preserve-folder-structures.html#cb55-1" tabindex="-1"></a>metadataObj <span class="ot">&lt;-</span> <span class="fu">selectMember</span>(dp, <span class="at">name=</span><span class="st">&quot;sysmeta@formatId&quot;</span>, <span class="at">value=</span><span class="st">&quot;https://eml.ecoinformatics.org/eml-2.2.0&quot;</span>)</span>
<span id="cb55-2"><a href="preserve-folder-structures.html#cb55-2" tabindex="-1"></a></span>
<span id="cb55-3"><a href="preserve-folder-structures.html#cb55-3" tabindex="-1"></a>doc <span class="ot">&lt;-</span> <span class="fu">read_eml</span>(<span class="fu">getObject</span>(d1c<span class="sc">@</span>mn, metadataObj))</span>
<span id="cb55-4"><a href="preserve-folder-structures.html#cb55-4" tabindex="-1"></a>doc<span class="sc">$</span>dataset<span class="sc">$</span>otherEntity <span class="ot">&lt;-</span> <span class="cn">NULL</span></span>
<span id="cb55-5"><a href="preserve-folder-structures.html#cb55-5" tabindex="-1"></a>oes <span class="ot">&lt;-</span> <span class="fu">list</span>()</span>
<span id="cb55-6"><a href="preserve-folder-structures.html#cb55-6" tabindex="-1"></a></span>
<span id="cb55-7"><a href="preserve-folder-structures.html#cb55-7" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">length</span>(abs_paths)){</span>
<span id="cb55-8"><a href="preserve-folder-structures.html#cb55-8" tabindex="-1"></a>  formatId <span class="ot">&lt;-</span> arcticdatautils<span class="sc">::</span><span class="fu">guess_format_id</span>(abs_paths[i])</span>
<span id="cb55-9"><a href="preserve-folder-structures.html#cb55-9" tabindex="-1"></a>  id <span class="ot">&lt;-</span> <span class="fu">generateIdentifier</span>(d1c<span class="sc">@</span>mn, <span class="at">scheme =</span> <span class="st">&quot;uuid&quot;</span>)</span>
<span id="cb55-10"><a href="preserve-folder-structures.html#cb55-10" tabindex="-1"></a>  dataObj <span class="ot">&lt;-</span> <span class="fu">new</span>(<span class="st">&quot;DataObject&quot;</span>, <span class="at">format =</span> formatId, <span class="at">filename =</span> abs_paths[i], <span class="at">targetPath =</span> rel_paths[i], <span class="at">id =</span> id)</span>
<span id="cb55-11"><a href="preserve-folder-structures.html#cb55-11" tabindex="-1"></a>  dp <span class="ot">&lt;-</span> <span class="fu">addMember</span>(dp, dataObj, metadataObj)</span>
<span id="cb55-12"><a href="preserve-folder-structures.html#cb55-12" tabindex="-1"></a>  oes[[i]] <span class="ot">&lt;-</span> eml<span class="sc">$</span><span class="fu">otherEntity</span>(<span class="at">entityName =</span> rel_paths[i], <span class="at">entityType =</span> formatId, <span class="at">id =</span> id)</span>
<span id="cb55-13"><a href="preserve-folder-structures.html#cb55-13" tabindex="-1"></a>}</span>
<span id="cb55-14"><a href="preserve-folder-structures.html#cb55-14" tabindex="-1"></a></span>
<span id="cb55-15"><a href="preserve-folder-structures.html#cb55-15" tabindex="-1"></a>doc<span class="sc">$</span>dataset<span class="sc">$</span>otherEntity <span class="ot">&lt;-</span> oes</span>
<span id="cb55-16"><a href="preserve-folder-structures.html#cb55-16" tabindex="-1"></a></span>
<span id="cb55-17"><a href="preserve-folder-structures.html#cb55-17" tabindex="-1"></a><span class="fu">write_eml</span>(doc, <span class="st">&quot;~/metadata.xml&quot;</span>)</span>
<span id="cb55-18"><a href="preserve-folder-structures.html#cb55-18" tabindex="-1"></a>dp <span class="ot">&lt;-</span> <span class="fu">replaceMember</span>(dp, metadataId, <span class="at">replacement=</span><span class="st">&quot;~/metadata.xml&quot;</span>)</span></code></pre></div>
<p>Once this is finished you can examine the relationships by running <code>View(dp@relations$relations)</code>. If everything worked out well you should see rows that look like this:</p>
<div class="line-block"><code>urn:uuid:a398312d-2c87-4b19-8380-3f11d2a1922d</code> | <code>http://www.w3.org/ns/prov#atLocation</code> | <code>figure2/figure2.tif</code> |</div>
<p>The <code>targetPath</code> (3rd column) should NOT look like</p>
<div class="line-block"><code>urn:uuid:a398312d-2c87-4b19-8380-3f11d2a1922d</code> | <code>http://www.w3.org/ns/prov#atLocation</code> | <code>/home/jclark/ArcticSupport/Zhao/dataset1/figure2/figure2.tif</code> |</div>
<p>Make sure this looks correct, then update the data package with:</p>
<div class="sourceCode" id="cb56"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb56-1"><a href="preserve-folder-structures.html#cb56-1" tabindex="-1"></a><span class="fu">uploadDataPackage</span>(d1c, dp, <span class="at">public =</span> <span class="cn">FALSE</span>)</span></code></pre></div>
<p>Finally, check your work. Go to the Arctic Data Center and see if the package displays correctly. Edit the package using the user interface to remove the zip file. Continue with metadata updates as normal.</p>
</div>
<div id="summary" class="section level3 hasAnchor">
<h3>Summary<a href="preserve-folder-structures.html#summary" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Here is the example code all put together. Make sure you change all of the relevant bits, and check your work carefully!!</p>
<div class="sourceCode" id="cb57"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb57-1"><a href="preserve-folder-structures.html#cb57-1" tabindex="-1"></a>url <span class="ot">&lt;-</span> <span class="st">&quot;https://arcticdata.io/metacat/d1/mn/v2/object/urn%3Auuid%3A8fee5046-1a8f-4ccc-80f2-70c557a66338&quot;</span></span>
<span id="cb57-2"><a href="preserve-folder-structures.html#cb57-2" tabindex="-1"></a>pid <span class="ot">&lt;-</span> <span class="fu">gsub</span>(<span class="st">&quot;https://arcticdata.io/metacat/d1/mn/v2/object/&quot;</span>, <span class="st">&quot;&quot;</span>, url) <span class="sc">%&gt;%</span>  <span class="fu">gsub</span>(<span class="st">&quot;%3A&quot;</span>, <span class="st">&quot;:&quot;</span>, .)</span>
<span id="cb57-3"><a href="preserve-folder-structures.html#cb57-3" tabindex="-1"></a></span>
<span id="cb57-4"><a href="preserve-folder-structures.html#cb57-4" tabindex="-1"></a><span class="fu">writeBin</span>(<span class="fu">getObject</span>(d1c<span class="sc">@</span>mn, pid), <span class="st">&quot;~/Submitter/example.zip&quot;</span>)</span>
<span id="cb57-5"><a href="preserve-folder-structures.html#cb57-5" tabindex="-1"></a></span>
<span id="cb57-6"><a href="preserve-folder-structures.html#cb57-6" tabindex="-1"></a><span class="fu">unzip</span>(<span class="st">&quot;~/Submitter/example.zip&quot;</span>, <span class="at">exdir =</span> <span class="st">&quot;~/Submitter&quot;</span>)</span>
<span id="cb57-7"><a href="preserve-folder-structures.html#cb57-7" tabindex="-1"></a></span>
<span id="cb57-8"><a href="preserve-folder-structures.html#cb57-8" tabindex="-1"></a>dp <span class="ot">&lt;-</span> <span class="fu">getDataPackage</span>(d1c, <span class="st">&quot;identifier&quot;</span>)</span>
<span id="cb57-9"><a href="preserve-folder-structures.html#cb57-9" tabindex="-1"></a></span>
<span id="cb57-10"><a href="preserve-folder-structures.html#cb57-10" tabindex="-1"></a>abs_paths <span class="ot">&lt;-</span> <span class="fu">list.files</span>(<span class="st">&quot;~/Submitter/PI_dir_name/&quot;</span>, <span class="at">full.names =</span> <span class="cn">TRUE</span>, <span class="at">recursive =</span> <span class="cn">TRUE</span>)</span>
<span id="cb57-11"><a href="preserve-folder-structures.html#cb57-11" tabindex="-1"></a>rel_paths <span class="ot">&lt;-</span> <span class="fu">list.files</span>(<span class="st">&quot;~/Submitter/PI_dir_name/&quot;</span>, <span class="at">full.names =</span> <span class="cn">FALSE</span>, <span class="at">recursive =</span> <span class="cn">TRUE</span>)</span>
<span id="cb57-12"><a href="preserve-folder-structures.html#cb57-12" tabindex="-1"></a></span>
<span id="cb57-13"><a href="preserve-folder-structures.html#cb57-13" tabindex="-1"></a>metadataObj <span class="ot">&lt;-</span> <span class="fu">selectMember</span>(dp, <span class="at">name=</span><span class="st">&quot;sysmeta@formatId&quot;</span>, <span class="at">value=</span><span class="st">&quot;https://eml.ecoinformatics.org/eml-2.2.0&quot;</span>)</span>
<span id="cb57-14"><a href="preserve-folder-structures.html#cb57-14" tabindex="-1"></a></span>
<span id="cb57-15"><a href="preserve-folder-structures.html#cb57-15" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">length</span>(abs_paths)){</span>
<span id="cb57-16"><a href="preserve-folder-structures.html#cb57-16" tabindex="-1"></a>  formatId <span class="ot">&lt;-</span> arcticdatautils<span class="sc">::</span><span class="fu">guess_format_id</span>(abs_paths[i])</span>
<span id="cb57-17"><a href="preserve-folder-structures.html#cb57-17" tabindex="-1"></a>  dataObj <span class="ot">&lt;-</span> <span class="fu">new</span>(<span class="st">&quot;DataObject&quot;</span>, <span class="at">format =</span> formatId, <span class="at">filename =</span> abs_paths[i], <span class="at">targetPath =</span> rel_paths[i])</span>
<span id="cb57-18"><a href="preserve-folder-structures.html#cb57-18" tabindex="-1"></a>  dp <span class="ot">&lt;-</span> <span class="fu">addMember</span>(dp, dataObj, metadataObj)</span>
<span id="cb57-19"><a href="preserve-folder-structures.html#cb57-19" tabindex="-1"></a>}</span></code></pre></div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="show-indexing-status.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="update-a-package-with-a-new-data-object.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "section"
}
});
});
</script>

</body>

</html>
