<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 4 Editing EML | NCEAS Data Team Training</title>
  <meta name="description" content="This is a training guide and reference resource for NCEAS data team members working on the SASAP and Arctic Data Center projects" />
  <meta name="generator" content="bookdown 0.35.1 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 4 Editing EML | NCEAS Data Team Training" />
  <meta property="og:type" content="book" />
  
  <meta property="og:description" content="This is a training guide and reference resource for NCEAS data team members working on the SASAP and Arctic Data Center projects" />
  <meta name="github-repo" content="NCEAS/datateam-training" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 4 Editing EML | NCEAS Data Team Training" />
  
  <meta name="twitter:description" content="This is a training guide and reference resource for NCEAS data team members working on the SASAP and Arctic Data Center projects" />
  

<meta name="author" content="Jesse Goldstein, Dominic Mullen, Jeanette Clark, Irene Steves, Mitchell Maier, Bryce Mecum, Peter Slaughter, Emily O’Dean, Jasmine Lai, Daphne Virlar-Knight" />


<meta name="date" content="2023-08-30" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  <link rel="shortcut icon" href="favicon.ico" type="image/x-icon" />
<link rel="prev" href="exploring-eml.html"/>
<link rel="next" href="updating-a-data-package.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  background-color: #f8f8f8; }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ef2929; } /* Alert */
code span.an { color: #8f5902; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #204a87; } /* Attribute */
code span.bn { color: #0000cf; } /* BaseN */
code span.cf { color: #204a87; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4e9a06; } /* Char */
code span.cn { color: #8f5902; } /* Constant */
code span.co { color: #8f5902; font-style: italic; } /* Comment */
code span.cv { color: #8f5902; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #8f5902; font-weight: bold; font-style: italic; } /* Documentation */
code span.dt { color: #204a87; } /* DataType */
code span.dv { color: #0000cf; } /* DecVal */
code span.er { color: #a40000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #0000cf; } /* Float */
code span.fu { color: #204a87; font-weight: bold; } /* Function */
code span.im { } /* Import */
code span.in { color: #8f5902; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #204a87; font-weight: bold; } /* Keyword */
code span.op { color: #ce5c00; font-weight: bold; } /* Operator */
code span.ot { color: #8f5902; } /* Other */
code span.pp { color: #8f5902; font-style: italic; } /* Preprocessor */
code span.sc { color: #ce5c00; font-weight: bold; } /* SpecialChar */
code span.ss { color: #4e9a06; } /* SpecialString */
code span.st { color: #4e9a06; } /* String */
code span.va { color: #000000; } /* Variable */
code span.vs { color: #4e9a06; } /* VerbatimString */
code span.wa { color: #8f5902; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
  
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
</style>

<link rel="stylesheet" href="../styles.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Data Team Training</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Welcome to NCEAS!</a>
<ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#first-day-to-dos"><i class="fa fa-check"></i>First day to-dos</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#account-information"><i class="fa fa-check"></i>Account information</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#nceas-events"><i class="fa fa-check"></i>NCEAS events</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#nceas-community-meetings-groups"><i class="fa fa-check"></i>NCEAS Community Meetings/ Groups</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#internship-expectations"><i class="fa fa-check"></i>Internship Expectations</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#code-of-conduct"><i class="fa fa-check"></i>Code of Conduct</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#citation-information"><i class="fa fa-check"></i>Citation Information</a></li>
</ul></li>
<li class="chapter" data-level="1" data-path="introduction-to-open-science.html"><a href="introduction-to-open-science.html"><i class="fa fa-check"></i><b>1</b> Introduction to open science</a>
<ul>
<li class="chapter" data-level="1.1" data-path="introduction-to-open-science.html"><a href="introduction-to-open-science.html#background-reading"><i class="fa fa-check"></i><b>1.1</b> Background reading</a></li>
<li class="chapter" data-level="1.2" data-path="introduction-to-open-science.html"><a href="introduction-to-open-science.html#effective-data-management"><i class="fa fa-check"></i><b>1.2</b> Effective data management</a></li>
<li class="chapter" data-level="1.3" data-path="introduction-to-open-science.html"><a href="introduction-to-open-science.html#using-dataone"><i class="fa fa-check"></i><b>1.3</b> Using DataONE</a></li>
<li class="chapter" data-level="1.4" data-path="introduction-to-open-science.html"><a href="introduction-to-open-science.html#working-on-a-remote-server"><i class="fa fa-check"></i><b>1.4</b> Working on a remote server</a></li>
<li class="chapter" data-level="1.5" data-path="introduction-to-open-science.html"><a href="introduction-to-open-science.html#a-note-on-paths"><i class="fa fa-check"></i><b>1.5</b> A note on paths</a></li>
<li class="chapter" data-level="1.6" data-path="introduction-to-open-science.html"><a href="introduction-to-open-science.html#a-note-on-r"><i class="fa fa-check"></i><b>1.6</b> A note on R</a></li>
<li class="chapter" data-level="1.7" data-path="introduction-to-open-science.html"><a href="introduction-to-open-science.html#a-note-on-effective-troubleshooting-in-r"><i class="fa fa-check"></i><b>1.7</b> A note on effective troubleshooting in R</a></li>
<li class="chapter" data-level="1.8" data-path="introduction-to-open-science.html"><a href="introduction-to-open-science.html#a-note-on-exercises"><i class="fa fa-check"></i><b>1.8</b> A note on Exercises</a></li>
<li class="chapter" data-level="1.9" data-path="introduction-to-open-science.html"><a href="introduction-to-open-science.html#exercise-1"><i class="fa fa-check"></i><b>1.9</b> Exercise 1</a>
<ul>
<li class="chapter" data-level="1.9.1" data-path="introduction-to-open-science.html"><a href="introduction-to-open-science.html#part-1"><i class="fa fa-check"></i><b>1.9.1</b> Part 1</a></li>
<li class="chapter" data-level="1.9.2" data-path="introduction-to-open-science.html"><a href="introduction-to-open-science.html#part-2"><i class="fa fa-check"></i><b>1.9.2</b> Part 2</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="2" data-path="creating-a-data-package.html"><a href="creating-a-data-package.html"><i class="fa fa-check"></i><b>2</b> Creating a data package</a>
<ul>
<li class="chapter" data-level="2.1" data-path="creating-a-data-package.html"><a href="creating-a-data-package.html#what-is-in-a-package"><i class="fa fa-check"></i><b>2.1</b> What is in a package?</a></li>
<li class="chapter" data-level="2.2" data-path="creating-a-data-package.html"><a href="creating-a-data-package.html#packages-on-the-website"><i class="fa fa-check"></i><b>2.2</b> Packages on the Website</a></li>
<li class="chapter" data-level="2.3" data-path="creating-a-data-package.html"><a href="creating-a-data-package.html#about-identifiers"><i class="fa fa-check"></i><b>2.3</b> About identifiers</a></li>
<li class="chapter" data-level="2.4" data-path="creating-a-data-package.html"><a href="creating-a-data-package.html#upload-a-package"><i class="fa fa-check"></i><b>2.4</b> Upload a package</a></li>
<li class="chapter" data-level="2.5" data-path="creating-a-data-package.html"><a href="creating-a-data-package.html#datapack-background"><i class="fa fa-check"></i><b>2.5</b> datapack Background</a>
<ul>
<li class="chapter" data-level="2.5.1" data-path="creating-a-data-package.html"><a href="creating-a-data-package.html#navigating-data-packages"><i class="fa fa-check"></i><b>2.5.1</b> Navigating data packages</a></li>
<li class="chapter" data-level="2.5.2" data-path="creating-a-data-package.html"><a href="creating-a-data-package.html#data-objects"><i class="fa fa-check"></i><b>2.5.2</b> Data Objects</a></li>
<li class="chapter" data-level="2.5.3" data-path="creating-a-data-package.html"><a href="creating-a-data-package.html#provenance"><i class="fa fa-check"></i><b>2.5.3</b> Provenance</a></li>
</ul></li>
<li class="chapter" data-level="2.6" data-path="creating-a-data-package.html"><a href="creating-a-data-package.html#exercise-2a"><i class="fa fa-check"></i><b>2.6</b> Exercise 2a</a></li>
<li class="chapter" data-level="2.7" data-path="creating-a-data-package.html"><a href="creating-a-data-package.html#create-a-new-data-package"><i class="fa fa-check"></i><b>2.7</b> Create a new data package</a>
<ul>
<li class="chapter" data-level="2.7.1" data-path="creating-a-data-package.html"><a href="creating-a-data-package.html#upload-new-data-files"><i class="fa fa-check"></i><b>2.7.1</b> Upload new data files</a></li>
<li class="chapter" data-level="2.7.2" data-path="creating-a-data-package.html"><a href="creating-a-data-package.html#upload-the-package"><i class="fa fa-check"></i><b>2.7.2</b> Upload the package</a></li>
</ul></li>
<li class="chapter" data-level="2.8" data-path="creating-a-data-package.html"><a href="creating-a-data-package.html#exercise-2b"><i class="fa fa-check"></i><b>2.8</b> Exercise 2b</a>
<ul>
<li class="chapter" data-level="2.8.1" data-path="creating-a-data-package.html"><a href="creating-a-data-package.html#part-1---gather-your-data-files"><i class="fa fa-check"></i><b>2.8.1</b> Part 1 - Gather your data files</a></li>
<li class="chapter" data-level="2.8.2" data-path="creating-a-data-package.html"><a href="creating-a-data-package.html#part-2---working-in-r"><i class="fa fa-check"></i><b>2.8.2</b> Part 2 - Working in R</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="exploring-eml.html"><a href="exploring-eml.html"><i class="fa fa-check"></i><b>3</b> Exploring EML</a>
<ul>
<li class="chapter" data-level="3.1" data-path="exploring-eml.html"><a href="exploring-eml.html#navigate-through-eml"><i class="fa fa-check"></i><b>3.1</b> Navigate through EML</a></li>
<li class="chapter" data-level="3.2" data-path="exploring-eml.html"><a href="exploring-eml.html#understand-the-eml-schema"><i class="fa fa-check"></i><b>3.2</b> Understand the EML schema</a></li>
<li class="chapter" data-level="3.3" data-path="exploring-eml.html"><a href="exploring-eml.html#access-specific-elements"><i class="fa fa-check"></i><b>3.3</b> Access specific elements</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="editing-eml.html"><a href="editing-eml.html"><i class="fa fa-check"></i><b>4</b> Editing EML</a>
<ul>
<li class="chapter" data-level="4.1" data-path="editing-eml.html"><a href="editing-eml.html#edit-an-eml-element"><i class="fa fa-check"></i><b>4.1</b> Edit an EML element</a>
<ul>
<li class="chapter" data-level="4.1.1" data-path="editing-eml.html"><a href="editing-eml.html#edit-eml-with-strings"><i class="fa fa-check"></i><b>4.1.1</b> Edit EML with strings</a></li>
<li class="chapter" data-level="4.1.2" data-path="editing-eml.html"><a href="editing-eml.html#edit-eml-with-the-eml-package"><i class="fa fa-check"></i><b>4.1.2</b> Edit EML with the “EML” package</a></li>
<li class="chapter" data-level="4.1.3" data-path="editing-eml.html"><a href="editing-eml.html#edit-eml-with-objects"><i class="fa fa-check"></i><b>4.1.3</b> Edit EML with objects</a></li>
</ul></li>
<li class="chapter" data-level="4.2" data-path="editing-eml.html"><a href="editing-eml.html#fair-data-practices"><i class="fa fa-check"></i><b>4.2</b> FAIR data practices</a></li>
<li class="chapter" data-level="4.3" data-path="editing-eml.html"><a href="editing-eml.html#edit-attributelists"><i class="fa fa-check"></i><b>4.3</b> Edit attributeLists</a>
<ul>
<li class="chapter" data-level="4.3.1" data-path="editing-eml.html"><a href="editing-eml.html#edit-attributes"><i class="fa fa-check"></i><b>4.3.1</b> Edit attributes</a></li>
<li class="chapter" data-level="4.3.2" data-path="editing-eml.html"><a href="editing-eml.html#edit-custom-units"><i class="fa fa-check"></i><b>4.3.2</b> Edit custom units</a></li>
<li class="chapter" data-level="4.3.3" data-path="editing-eml.html"><a href="editing-eml.html#edit-factors"><i class="fa fa-check"></i><b>4.3.3</b> Edit factors</a></li>
<li class="chapter" data-level="4.3.4" data-path="editing-eml.html"><a href="editing-eml.html#finalize-attributelist"><i class="fa fa-check"></i><b>4.3.4</b> Finalize attributeList</a></li>
</ul></li>
<li class="chapter" data-level="4.4" data-path="editing-eml.html"><a href="editing-eml.html#set-physical"><i class="fa fa-check"></i><b>4.4</b> Set physical</a></li>
<li class="chapter" data-level="4.5" data-path="editing-eml.html"><a href="editing-eml.html#edit-datatables"><i class="fa fa-check"></i><b>4.5</b> Edit dataTables</a></li>
<li class="chapter" data-level="4.6" data-path="editing-eml.html"><a href="editing-eml.html#edit-otherentities"><i class="fa fa-check"></i><b>4.6</b> Edit otherEntities</a>
<ul>
<li class="chapter" data-level="4.6.1" data-path="editing-eml.html"><a href="editing-eml.html#remove-otherentities"><i class="fa fa-check"></i><b>4.6.1</b> Remove otherEntities</a></li>
<li class="chapter" data-level="4.6.2" data-path="editing-eml.html"><a href="editing-eml.html#create-otherentities"><i class="fa fa-check"></i><b>4.6.2</b> Create otherEntities</a></li>
</ul></li>
<li class="chapter" data-level="4.7" data-path="editing-eml.html"><a href="editing-eml.html#semantic-annotations"><i class="fa fa-check"></i><b>4.7</b> Semantic annotations</a>
<ul>
<li class="chapter" data-level="4.7.1" data-path="editing-eml.html"><a href="editing-eml.html#how-annotations-are-used"><i class="fa fa-check"></i><b>4.7.1</b> How annotations are used</a></li>
<li class="chapter" data-level="4.7.2" data-path="editing-eml.html"><a href="editing-eml.html#how-to-add-an-annotation"><i class="fa fa-check"></i><b>4.7.2</b> How to add an annotation</a></li>
<li class="chapter" data-level="4.7.3" data-path="editing-eml.html"><a href="editing-eml.html#annotating-sensitive-data"><i class="fa fa-check"></i><b>4.7.3</b> Annotating sensitive data</a></li>
</ul></li>
<li class="chapter" data-level="4.8" data-path="editing-eml.html"><a href="editing-eml.html#exercise-3a"><i class="fa fa-check"></i><b>4.8</b> Exercise 3a</a></li>
<li class="chapter" data-level="4.9" data-path="editing-eml.html"><a href="editing-eml.html#validate-eml-and-update-package"><i class="fa fa-check"></i><b>4.9</b> Validate EML and update package</a></li>
<li class="chapter" data-level="4.10" data-path="editing-eml.html"><a href="editing-eml.html#exercise-3b"><i class="fa fa-check"></i><b>4.10</b> Exercise 3b</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="updating-a-data-package.html"><a href="updating-a-data-package.html"><i class="fa fa-check"></i><b>5</b> Updating a data package</a>
<ul>
<li class="chapter" data-level="5.1" data-path="updating-a-data-package.html"><a href="updating-a-data-package.html#update-a-data-object"><i class="fa fa-check"></i><b>5.1</b> Update a data object</a></li>
<li class="chapter" data-level="5.2" data-path="updating-a-data-package.html"><a href="updating-a-data-package.html#update-a-package-with-a-new-data-object"><i class="fa fa-check"></i><b>5.2</b> Update a package with a new data object</a>
<ul>
<li class="chapter" data-level="5.2.1" data-path="updating-a-data-package.html"><a href="updating-a-data-package.html#publish-update"><i class="fa fa-check"></i><b>5.2.1</b> Publish update</a></li>
</ul></li>
<li class="chapter" data-level="5.3" data-path="updating-a-data-package.html"><a href="updating-a-data-package.html#exercise-4"><i class="fa fa-check"></i><b>5.3</b> Exercise 4</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="editing-system-metadata.html"><a href="editing-system-metadata.html"><i class="fa fa-check"></i><b>6</b> Editing system metadata</a>
<ul>
<li class="chapter" data-level="6.1" data-path="editing-system-metadata.html"><a href="editing-system-metadata.html#edit-sysmeta"><i class="fa fa-check"></i><b>6.1</b> Edit sysmeta</a>
<ul>
<li class="chapter" data-level="6.1.1" data-path="editing-system-metadata.html"><a href="editing-system-metadata.html#identifiers-and-sysmeta"><i class="fa fa-check"></i><b>6.1.1</b> Identifiers and sysmeta</a></li>
<li class="chapter" data-level="6.1.2" data-path="editing-system-metadata.html"><a href="editing-system-metadata.html#additional-resources"><i class="fa fa-check"></i><b>6.1.2</b> Additional resources</a></li>
</ul></li>
<li class="chapter" data-level="6.2" data-path="editing-system-metadata.html"><a href="editing-system-metadata.html#exercise-5"><i class="fa fa-check"></i><b>6.2</b> Exercise 5</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="building-provenance.html"><a href="building-provenance.html"><i class="fa fa-check"></i><b>7</b> Building provenance</a>
<ul>
<li class="chapter" data-level="7.1" data-path="building-provenance.html"><a href="building-provenance.html#using-the-prov-editor"><i class="fa fa-check"></i><b>7.1</b> Using the prov editor</a></li>
<li class="chapter" data-level="7.2" data-path="building-provenance.html"><a href="building-provenance.html#understanding-resource-maps"><i class="fa fa-check"></i><b>7.2</b> Understanding resource maps</a></li>
<li class="chapter" data-level="7.3" data-path="building-provenance.html"><a href="building-provenance.html#using-the-datapack-package"><i class="fa fa-check"></i><b>7.3</b> Using the <code>datapack</code> package</a>
<ul>
<li class="chapter" data-level="7.3.1" data-path="building-provenance.html"><a href="building-provenance.html#fixing-mistakes"><i class="fa fa-check"></i><b>7.3.1</b> Fixing mistakes</a></li>
</ul></li>
<li class="chapter" data-level="7.4" data-path="building-provenance.html"><a href="building-provenance.html#references"><i class="fa fa-check"></i><b>7.4</b> References</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="using-git.html"><a href="using-git.html"><i class="fa fa-check"></i><b>8</b> Using Git</a>
<ul>
<li class="chapter" data-level="8.1" data-path="using-git.html"><a href="using-git.html#usage-in-the-datateam"><i class="fa fa-check"></i><b>8.1</b> Usage in the datateam</a></li>
<li class="chapter" data-level="8.2" data-path="using-git.html"><a href="using-git.html#what-is-git"><i class="fa fa-check"></i><b>8.2</b> What is Git?</a>
<ul>
<li class="chapter" data-level="8.2.1" data-path="using-git.html"><a href="using-git.html#so-why-do-i-need-to-use-this-again"><i class="fa fa-check"></i><b>8.2.1</b> So why do I need to use this again?</a></li>
</ul></li>
<li class="chapter" data-level="8.3" data-path="using-git.html"><a href="using-git.html#setting-up-git"><i class="fa fa-check"></i><b>8.3</b> Setting up Git</a></li>
<li class="chapter" data-level="8.4" data-path="using-git.html"><a href="using-git.html#github-authentication"><i class="fa fa-check"></i><b>8.4</b> GitHub Authentication</a>
<ul>
<li class="chapter" data-level="8.4.1" data-path="using-git.html"><a href="using-git.html#cloning-the-arctic-data-repo"><i class="fa fa-check"></i><b>8.4.1</b> Cloning the arctic-data repo</a></li>
</ul></li>
<li class="chapter" data-level="8.5" data-path="using-git.html"><a href="using-git.html#working-with-the-repository"><i class="fa fa-check"></i><b>8.5</b> Working with the repository</a>
<ul>
<li class="chapter" data-level="8.5.1" data-path="using-git.html"><a href="using-git.html#adding-a-new-script"><i class="fa fa-check"></i><b>8.5.1</b> Adding a new script</a></li>
<li class="chapter" data-level="8.5.2" data-path="using-git.html"><a href="using-git.html#editing-a-script"><i class="fa fa-check"></i><b>8.5.2</b> Editing a script</a></li>
<li class="chapter" data-level="8.5.3" data-path="using-git.html"><a href="using-git.html#where-do-i-commit"><i class="fa fa-check"></i><b>8.5.3</b> Where do I commit?</a></li>
</ul></li>
<li class="chapter" data-level="8.6" data-path="using-git.html"><a href="using-git.html#my-git-tab-disappeared"><i class="fa fa-check"></i><b>8.6</b> My Git tab disappeared</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="first-ticket.html"><a href="first-ticket.html"><i class="fa fa-check"></i><b>9</b> First Ticket</a>
<ul>
<li class="chapter" data-level="9.1" data-path="first-ticket.html"><a href="first-ticket.html#navigate-rt"><i class="fa fa-check"></i><b>9.1</b> Navigate RT</a>
<ul>
<li class="chapter" data-level="9.1.1" data-path="first-ticket.html"><a href="first-ticket.html#front-page"><i class="fa fa-check"></i><b>9.1.1</b> Front page</a></li>
<li class="chapter" data-level="9.1.2" data-path="first-ticket.html"><a href="first-ticket.html#all-tickets"><i class="fa fa-check"></i><b>9.1.2</b> All tickets</a></li>
<li class="chapter" data-level="9.1.3" data-path="first-ticket.html"><a href="first-ticket.html#example-ticket"><i class="fa fa-check"></i><b>9.1.3</b> Example ticket</a></li>
<li class="chapter" data-level="9.1.4" data-path="first-ticket.html"><a href="first-ticket.html#new-data-submission"><i class="fa fa-check"></i><b>9.1.4</b> New data submission</a></li>
</ul></li>
<li class="chapter" data-level="9.2" data-path="first-ticket.html"><a href="first-ticket.html#initial-review-checklist"><i class="fa fa-check"></i><b>9.2</b> Initial review checklist</a></li>
<li class="chapter" data-level="9.3" data-path="first-ticket.html"><a href="first-ticket.html#processing-templates"><i class="fa fa-check"></i><b>9.3</b> Processing templates</a></li>
<li class="chapter" data-level="9.4" data-path="first-ticket.html"><a href="first-ticket.html#final-checklist"><i class="fa fa-check"></i><b>9.4</b> Final Checklist</a>
<ul>
<li class="chapter" data-level="9.4.1" data-path="first-ticket.html"><a href="first-ticket.html#special-datasets"><i class="fa fa-check"></i><b>9.4.1</b> Special Datasets</a></li>
<li class="chapter" data-level="9.4.2" data-path="first-ticket.html"><a href="first-ticket.html#system-metadata"><i class="fa fa-check"></i><b>9.4.2</b> System Metadata</a></li>
<li class="chapter" data-level="9.4.3" data-path="first-ticket.html"><a href="first-ticket.html#general-eml"><i class="fa fa-check"></i><b>9.4.3</b> General EML</a></li>
<li class="chapter" data-level="9.4.4" data-path="first-ticket.html"><a href="first-ticket.html#title-1"><i class="fa fa-check"></i><b>9.4.4</b> Title</a></li>
<li class="chapter" data-level="9.4.5" data-path="first-ticket.html"><a href="first-ticket.html#abstract-1"><i class="fa fa-check"></i><b>9.4.5</b> Abstract</a></li>
<li class="chapter" data-level="9.4.6" data-path="first-ticket.html"><a href="first-ticket.html#datatable-otherentity-spatialvectors"><i class="fa fa-check"></i><b>9.4.6</b> DataTable / OtherEntity / SpatialVectors</a></li>
<li class="chapter" data-level="9.4.7" data-path="first-ticket.html"><a href="first-ticket.html#people"><i class="fa fa-check"></i><b>9.4.7</b> People</a></li>
<li class="chapter" data-level="9.4.8" data-path="first-ticket.html"><a href="first-ticket.html#geographic-region"><i class="fa fa-check"></i><b>9.4.8</b> Geographic region</a></li>
<li class="chapter" data-level="9.4.9" data-path="first-ticket.html"><a href="first-ticket.html#project"><i class="fa fa-check"></i><b>9.4.9</b> Project</a></li>
<li class="chapter" data-level="9.4.10" data-path="first-ticket.html"><a href="first-ticket.html#methods-1"><i class="fa fa-check"></i><b>9.4.10</b> Methods</a></li>
<li class="chapter" data-level="9.4.11" data-path="first-ticket.html"><a href="first-ticket.html#check-eml-version"><i class="fa fa-check"></i><b>9.4.11</b> Check EML Version</a></li>
<li class="chapter" data-level="9.4.12" data-path="first-ticket.html"><a href="first-ticket.html#access"><i class="fa fa-check"></i><b>9.4.12</b> Access</a></li>
<li class="chapter" data-level="9.4.13" data-path="first-ticket.html"><a href="first-ticket.html#sftp-files"><i class="fa fa-check"></i><b>9.4.13</b> SFTP Files</a></li>
<li class="chapter" data-level="9.4.14" data-path="first-ticket.html"><a href="first-ticket.html#updated-datasets"><i class="fa fa-check"></i><b>9.4.14</b> Updated datasets</a></li>
</ul></li>
<li class="chapter" data-level="9.5" data-path="first-ticket.html"><a href="first-ticket.html#email-templates"><i class="fa fa-check"></i><b>9.5</b> Email templates</a>
<ul>
<li class="chapter" data-level="9.5.1" data-path="first-ticket.html"><a href="first-ticket.html#initial-email-template"><i class="fa fa-check"></i><b>9.5.1</b> Initial email template</a></li>
<li class="chapter" data-level="9.5.2" data-path="first-ticket.html"><a href="first-ticket.html#comment-templates-based-on-what-is-missing"><i class="fa fa-check"></i><b>9.5.2</b> Comment templates based on what is missing</a></li>
<li class="chapter" data-level="9.5.3" data-path="first-ticket.html"><a href="first-ticket.html#final-email-templates"><i class="fa fa-check"></i><b>9.5.3</b> Final email templates</a></li>
<li class="chapter" data-level="9.5.4" data-path="first-ticket.html"><a href="first-ticket.html#additional-email-templates"><i class="fa fa-check"></i><b>9.5.4</b> Additional email templates</a></li>
</ul></li>
<li class="chapter" data-level="9.6" data-path="first-ticket.html"><a href="first-ticket.html#categorize-datasets"><i class="fa fa-check"></i><b>9.6</b> Categorize datasets</a></li>
<li class="chapter" data-level="9.7" data-path="first-ticket.html"><a href="first-ticket.html#congrats"><i class="fa fa-check"></i><b>9.7</b> Congrats!</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="beyond-your-first-ticket.html"><a href="beyond-your-first-ticket.html"><i class="fa fa-check"></i><b>10</b> Beyond your first ticket</a>
<ul>
<li class="chapter" data-level="10.1" data-path="beyond-your-first-ticket.html"><a href="beyond-your-first-ticket.html#working-with-large-data-packages"><i class="fa fa-check"></i><b>10.1</b> Working with large data packages</a></li>
<li class="chapter" data-level="10.2" data-path="beyond-your-first-ticket.html"><a href="beyond-your-first-ticket.html#add-physicals-to-submissions"><i class="fa fa-check"></i><b>10.2</b> Add physicals to submissions</a></li>
<li class="chapter" data-level="10.3" data-path="beyond-your-first-ticket.html"><a href="beyond-your-first-ticket.html#use-references"><i class="fa fa-check"></i><b>10.3</b> Use references</a>
<ul>
<li class="chapter" data-level="10.3.1" data-path="beyond-your-first-ticket.html"><a href="beyond-your-first-ticket.html#example-with-parties"><i class="fa fa-check"></i><b>10.3.1</b> Example with parties</a></li>
<li class="chapter" data-level="10.3.2" data-path="beyond-your-first-ticket.html"><a href="beyond-your-first-ticket.html#example-with-attributes"><i class="fa fa-check"></i><b>10.3.2</b> Example with attributes</a></li>
</ul></li>
<li class="chapter" data-level="10.4" data-path="beyond-your-first-ticket.html"><a href="beyond-your-first-ticket.html#annotations"><i class="fa fa-check"></i><b>10.4</b> Annotations</a></li>
<li class="chapter" data-level="10.5" data-path="beyond-your-first-ticket.html"><a href="beyond-your-first-ticket.html#streamlining-your-workflow"><i class="fa fa-check"></i><b>10.5</b> Streamlining your workflow</a></li>
<li class="chapter" data-level="10.6" data-path="beyond-your-first-ticket.html"><a href="beyond-your-first-ticket.html#code-snippets"><i class="fa fa-check"></i><b>10.6</b> Code Snippets</a></li>
<li class="chapter" data-level="10.7" data-path="beyond-your-first-ticket.html"><a href="beyond-your-first-ticket.html#resources-for-r"><i class="fa fa-check"></i><b>10.7</b> Resources for R</a>
<ul>
<li class="chapter" data-level="10.7.1" data-path="beyond-your-first-ticket.html"><a href="beyond-your-first-ticket.html#learning"><i class="fa fa-check"></i><b>10.7.1</b> Learning</a></li>
<li class="chapter" data-level="10.7.2" data-path="beyond-your-first-ticket.html"><a href="beyond-your-first-ticket.html#packages"><i class="fa fa-check"></i><b>10.7.2</b> Packages</a></li>
</ul></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://nceas.github.io/datateam-training/reference" target="blank">Reference Guide</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">NCEAS Data Team Training</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="editing-eml" class="section level1 hasAnchor" number="4">
<h1><span class="header-section-number">Chapter 4</span> Editing EML<a href="editing-eml.html#editing-eml" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<p>This chapter is a practical tutorial for using R to read, edit, write, and validate EML documents. Much of the information here can also be found in the vignettes for the R packages used in this section (e.g. the <a href = 'https://github.com/ropensci/EML/blob/master/vignettes/creating-EML.Rmd' target='_blank'>EML package</a>).</p>
<p>Most of the functions you will see in this chapter will use the <code>arcticdatautils</code> and <code>EML</code> packages.</p>
<div class="note">
<p>
This chapter will be longest of all the sections! This is a reminder
to take frequent breaks when completing this section.
</p>
</div>
<div id="edit-an-eml-element" class="section level2 hasAnchor" number="4.1">
<h2><span class="header-section-number">4.1</span> Edit an EML element<a href="editing-eml.html#edit-an-eml-element" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>There are multiple ways to edit an EML element.</p>
<div id="edit-eml-with-strings" class="section level3 hasAnchor" number="4.1.1">
<h3><span class="header-section-number">4.1.1</span> Edit EML with strings<a href="editing-eml.html#edit-eml-with-strings" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>The most basic way to edit an EML element would be to navigate to the element and replace it with something else. Easy!</p>
<p>For example, to change the title one could use the following command:</p>
<div class="sourceCode" id="cb38"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb38-1"><a href="editing-eml.html#cb38-1" tabindex="-1"></a>doc<span class="sc">$</span>dataset<span class="sc">$</span>title <span class="ot">&lt;-</span> <span class="st">&quot;New Title&quot;</span></span></code></pre></div>
<p>If the element you are editing allows for multiple values, you can pass it a list of character strings. Since a dataset can have multiple titles, we can do this:</p>
<div class="sourceCode" id="cb39"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb39-1"><a href="editing-eml.html#cb39-1" tabindex="-1"></a>doc<span class="sc">$</span>dataset<span class="sc">$</span>title <span class="ot">&lt;-</span> <span class="fu">list</span>(<span class="st">&quot;New Title&quot;</span>, <span class="st">&quot;Second New Title&quot;</span>)</span></code></pre></div>
<p>However, this isn’t always the best method to edit the EML, particularly if the element has sub-elements.</p>
</div>
<div id="edit-eml-with-the-eml-package" class="section level3 hasAnchor" number="4.1.2">
<h3><span class="header-section-number">4.1.2</span> Edit EML with the “EML” package<a href="editing-eml.html#edit-eml-with-the-eml-package" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>To edit a section where you are not 100% sure of the sub-elements, using the <code>eml$elementName()</code> helper functions from the EML package will pre-populate the options for you if you utilize the RStudio autocomplete functionality. The arguments in these functions show the available slots for any given EML element. For example, typing <code>doc$dataset$abstract &lt;- eml$abstract()&lt;TAB&gt;</code> will show you that the <code>abstract</code> element can take either the <code>section</code> or <code>para</code> sub-elements.</p>
<p><img src="../images/eml_function_autocomplete.png" /></p>
<div class="sourceCode" id="cb40"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb40-1"><a href="editing-eml.html#cb40-1" tabindex="-1"></a>doc<span class="sc">$</span>dataset<span class="sc">$</span>abstract <span class="ot">&lt;-</span> eml<span class="sc">$</span><span class="fu">abstract</span>(<span class="at">para =</span> <span class="st">&quot;A concise but thorough description of the who, what, where, when, why, and how of a dataset.&quot;</span>)</span></code></pre></div>
<p>This inserts the abstract with a <code>para</code> element in our dataset, which we know from the EML <a href="https://eml.ecoinformatics.org/schema/index.html">schema</a> is valid.</p>
<p>Note that the above is equivalent to the following generic construction:</p>
<div class="sourceCode" id="cb41"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb41-1"><a href="editing-eml.html#cb41-1" tabindex="-1"></a>doc<span class="sc">$</span>dataset<span class="sc">$</span>abstract <span class="ot">&lt;-</span> <span class="fu">list</span>(<span class="at">para =</span> <span class="st">&quot;A concise but thorough description of the who, what, where, when, why, and how of a dataset.&quot;</span>)</span></code></pre></div>
<p>The <code>eml()</code> family of functions provides the sub-elements as arguments, which is extremely helpful, but functionally all it is doing is creating a named list, which you can also do using the <code>list</code> function.</p>
</div>
<div id="edit-eml-with-objects" class="section level3 hasAnchor" number="4.1.3">
<h3><span class="header-section-number">4.1.3</span> Edit EML with objects<a href="editing-eml.html#edit-eml-with-objects" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>A final way to edit an EML element would be to build a new object to replace the old object. To begin, you might create an object using an <code>eml</code> helper function. Let’s take keywords as an example. Sometimes keyword lists in a metadata record will come from different thesauruses, which you can then add in series (similar to the way we added multiple titles) to the element <code>keywordSet</code>.</p>
<p>We start by creating our first set of keywords and saving it to an object.</p>
<div class="sourceCode" id="cb42"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb42-1"><a href="editing-eml.html#cb42-1" tabindex="-1"></a>kw_list_1 <span class="ot">&lt;-</span> eml<span class="sc">$</span><span class="fu">keywordSet</span>(<span class="at">keywordThesaurus =</span> <span class="st">&quot;LTER controlled vocabulary&quot;</span>,</span>
<span id="cb42-2"><a href="editing-eml.html#cb42-2" tabindex="-1"></a>                            <span class="at">keyword =</span> <span class="fu">list</span>(<span class="st">&quot;bacteria&quot;</span>, <span class="st">&quot;carnivorous plants&quot;</span>, <span class="st">&quot;genetics&quot;</span>, <span class="st">&quot;thresholds&quot;</span>))</span></code></pre></div>
<p>Which returns:</p>
<pre><code>$keyword
$keyword[[1]]
[1] &quot;bacteria&quot;

$keyword[[2]]
[1] &quot;carnivorous plants&quot;

$keyword[[3]]
[1] &quot;genetics&quot;

$keyword[[4]]
[1] &quot;thresholds&quot;


$keywordThesaurus
[1] &quot;LTER controlled vocabulary&quot;</code></pre>
<p>We create the second keyword list similarly:</p>
<div class="sourceCode" id="cb44"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb44-1"><a href="editing-eml.html#cb44-1" tabindex="-1"></a>kw_list_2 <span class="ot">&lt;-</span> eml<span class="sc">$</span><span class="fu">keywordSet</span>(<span class="at">keywordThesaurus =</span> <span class="st">&quot;LTER core area&quot;</span>, </span>
<span id="cb44-2"><a href="editing-eml.html#cb44-2" tabindex="-1"></a>                            <span class="at">keyword =</span>  <span class="fu">list</span>(<span class="st">&quot;populations&quot;</span>, <span class="st">&quot;inorganic nutrients&quot;</span>, <span class="st">&quot;disturbance&quot;</span>))</span></code></pre></div>
<p>Finally, we can insert our two keyword lists into our EML document just like we did with the title example above, but rather than passing character strings into <code>list()</code>, we will pass our two keyword set objects.</p>
<div class="sourceCode" id="cb45"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb45-1"><a href="editing-eml.html#cb45-1" tabindex="-1"></a>doc<span class="sc">$</span>dataset<span class="sc">$</span>keywordSet <span class="ot">&lt;-</span> <span class="fu">list</span>(kw_list_1, kw_list_2)</span></code></pre></div>
<div class="note">
<p>
Note that you <strong>must</strong> use the function
<code>list</code> here and not the <code>c()</code> function. The
reasons for this are complex, and due to some technical subtlety in R -
but the gist of the issue is that the <code>c()</code> function can
behave in unexpected ways with nested lists, and frequently will
collapse the nesting into a single level, resulting in invalid EML.
</p>
</div>
</div>
</div>
<div id="fair-data-practices" class="section level2 hasAnchor" number="4.2">
<h2><span class="header-section-number">4.2</span> FAIR data practices<a href="editing-eml.html#fair-data-practices" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>The result of these function calls won’t show up on the webpage but they will add a <code>publisher</code> element to the <code>dataset</code> element and a <code>system</code> to all of the entities based on what the PID is. This will help make our metadata more FAIR (Findable, Accessible, Interoperable, Reusable).</p>
<p>These two functions come from the <code>arcticatautils</code> package, an R package we wrote to help with some very specific data processing tasks.</p>
<p>Add these function calls to all of your EML processing scripts.</p>
<div class="sourceCode" id="cb46"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb46-1"><a href="editing-eml.html#cb46-1" tabindex="-1"></a>  <span class="fu">library</span>(arcticdatautils)</span>
<span id="cb46-2"><a href="editing-eml.html#cb46-2" tabindex="-1"></a></span>
<span id="cb46-3"><a href="editing-eml.html#cb46-3" tabindex="-1"></a>  doc <span class="ot">&lt;-</span> <span class="fu">eml_add_publisher</span>(doc)</span>
<span id="cb46-4"><a href="editing-eml.html#cb46-4" tabindex="-1"></a>  doc <span class="ot">&lt;-</span> <span class="fu">eml_add_entity_system</span>(doc)</span></code></pre></div>
</div>
<div id="edit-attributelists" class="section level2 hasAnchor" number="4.3">
<h2><span class="header-section-number">4.3</span> Edit attributeLists<a href="editing-eml.html#edit-attributelists" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Attributes are descriptions of variables, typically columns or column names in tabular data. Attributes are stored in an <a href = 'https://eml.ecoinformatics.org/images/eml-attribute.png' target='_blank'>attributeList</a>. When editing attributes in R, you need to create one to three objects:</p>
<ol style="list-style-type: decimal">
<li>A data.frame of attributes</li>
<li>A data.frame of custom units (if applicable)</li>
</ol>
<p>The <code>attributeList</code> is an element within one of 4 different types of entity objects. An entity corresponds to a file, typically. Multiple entities (files) can exist within a dataset. The 4 different entity types are <code>dataTable</code> (most common for us), <code>spatialVector</code>, <code>spatialRaster</code>, and <code>otherEntity</code></p>
<p>Please note that submitting attribute information through the website will store them in an <code>otherEntity</code> object by default. We prefer to store them in a <code>dataTable</code> object for tabular data or a <code>spatialVector</code> object for spatial data.</p>
<p>To edit or examine an existing attribute table already in an EML file, you can use the following commands, where <code>i</code> represents the index of the series element you are interested in. Note that if there is only one item in the series (ie there is only one <code>dataTable</code>), you should just call <code>doc$dataset$dataTable</code>, as in this case <code>doc$dataset$dataTable[[1]]</code> will return the first sub-element of the <code>dataTable</code> (the <code>entityName</code>)</p>
<div class="sourceCode" id="cb47"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb47-1"><a href="editing-eml.html#cb47-1" tabindex="-1"></a><span class="co"># If they are stored in an otherEntity (submitted from the website by default)</span></span>
<span id="cb47-2"><a href="editing-eml.html#cb47-2" tabindex="-1"></a>attributeList <span class="ot">&lt;-</span> EML<span class="sc">::</span><span class="fu">get_attributes</span>(doc<span class="sc">$</span>dataset<span class="sc">$</span>otherEntity[[i]]<span class="sc">$</span>attributeList)</span>
<span id="cb47-3"><a href="editing-eml.html#cb47-3" tabindex="-1"></a><span class="co"># Or if they are stored in a dataTable (usually created by a datateam member)</span></span>
<span id="cb47-4"><a href="editing-eml.html#cb47-4" tabindex="-1"></a>attributeList <span class="ot">&lt;-</span> EML<span class="sc">::</span><span class="fu">get_attributes</span>(doc<span class="sc">$</span>dataset<span class="sc">$</span>dataTable[[i]]<span class="sc">$</span>attributeList)</span>
<span id="cb47-5"><a href="editing-eml.html#cb47-5" tabindex="-1"></a><span class="co"># Or if they are stored in a spatialVector (usually created by a datateam member)</span></span>
<span id="cb47-6"><a href="editing-eml.html#cb47-6" tabindex="-1"></a>attributeList <span class="ot">&lt;-</span> EML<span class="sc">::</span><span class="fu">get_attributes</span>(doc<span class="sc">$</span>dataset<span class="sc">$</span>spatialVector[[i]]<span class="sc">$</span>attributeList)</span>
<span id="cb47-7"><a href="editing-eml.html#cb47-7" tabindex="-1"></a></span>
<span id="cb47-8"><a href="editing-eml.html#cb47-8" tabindex="-1"></a>attributes <span class="ot">&lt;-</span> attributeList<span class="sc">$</span>attributes</span>
<span id="cb47-9"><a href="editing-eml.html#cb47-9" tabindex="-1"></a><span class="fu">print</span>(attributes)</span></code></pre></div>
<div id="edit-attributes" class="section level3 hasAnchor" number="4.3.1">
<h3><span class="header-section-number">4.3.1</span> Edit attributes<a href="editing-eml.html#edit-attributes" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Attribute information should be stored in a <code>data.frame</code> with the following columns:</p>
<ul>
<li><strong>attributeName</strong>: The name of the attribute as listed in the csv. Required. e.g.: “c_temp”</li>
<li><strong>attributeLabel</strong>: A descriptive label that can be used to display the name of an attribute. It is not constrained by system limitations on length or special characters. Optional. e.g.: “Temperature (Celsius)”</li>
<li><strong>attributeDefinition</strong>: Longer description of the attribute, including the required context for interpreting the <code>attributeName</code>. Required. e.g.: “The near shore water temperature in the upper inter-tidal zone, measured in degrees Celsius.”</li>
<li><strong>measurementScale</strong>: One of: nominal, ordinal, dateTime, ratio, interval. Required.
<ul>
<li><em>nominal</em>: unordered categories or text. e.g.: (Male, Female) or (Yukon River, Kuskokwim River)</li>
<li><em>ordinal</em>: ordered categories. e.g.: Low, Medium, High</li>
<li><em>dateTime</em>: date or time values from the Gregorian calendar. e.g.: 01-01-2001</li>
<li><em>ratio</em>: measurement scale with a meaningful zero point in nature. Ratios are proportional to the measured variable. e.g.: 0 Kelvin represents a complete absence of heat. 200 Kelvin is half as hot as 400 Kelvin. 1.2 meters per second is twice as fast as 0.6 meters per second.</li>
<li><em>interval</em>: values from a scale with equidistant points, where the zero point is arbitrary. This is usually reserved for degrees Celsius or Fahrenheit, or latitude and longitude coordinates, or any other human-constructed scale. e.g.: there is still heat at 0° Celsius; 12° Celsius is NOT half as hot as 24° Celsius.</li>
</ul></li>
<li><strong>domain</strong>: One of: <code>textDomain</code>, <code>enumeratedDomain</code>, <code>numericDomain</code>, <code>dateTime</code>. Required.
<ul>
<li><em>textDomain</em>: text that is free-form, or matches a pattern</li>
<li><em>enumeratedDomain</em>: text that belongs to a defined list of codes and definitions. e.g.: CASC = Cascade Lake, HEAR = Heart Lake</li>
<li><em>dateTimeDomain</em>: <code>dateTime</code> attributes</li>
<li><em>numericDomain</em>: attributes that are numbers (either <code>ratio</code> or <code>interval</code>)</li>
</ul></li>
<li><strong>formatString</strong>: Required for <code>dateTime</code>, NA otherwise. Format string for dates, e.g. “DD/MM/YYYY”.</li>
<li><strong>definition</strong>: Required for <code>textDomain</code>, NA otherwise. Definition for attributes that are a character string, matches attribute definition in most cases.</li>
<li><strong>unit</strong>: Required for <code>numericDomain</code>, NA otherwise. Unit string. If the unit is not a standard unit, a warning will appear when you create the attribute list, saying that it has been forced into a custom unit. Use caution here to make sure the unit really needs to be a custom unit. A list of standard units can be found using: <code>standardUnits &lt;- EML::get_unitList()</code> then running <code>View(standardUnits$units)</code>.</li>
<li><strong>numberType</strong>: Required for <code>numericDomain</code>, NA otherwise. Options are <code>real</code>, <code>natural</code>, <code>whole</code>, and <code>integer</code>.
<ul>
<li><em>real</em>: positive and negative fractions and integers (…-1,-0.25,0,0.25,1…)</li>
<li><em>natural</em>: non-zero positive integers (1,2,3…)</li>
<li><em>whole</em>: positive integers and zero (0,1,2,3…)</li>
<li><em>integer</em>: positive and negative integers and zero (…-2,-1,0,1,2…)</li>
</ul></li>
<li><strong>missingValueCode</strong>: Code for missing values (e.g.: ‘-999’, ‘NA’, ‘NaN’). NA otherwise. Note that an NA missing value code should be a string, ‘NA’, and numbers should also be strings, ‘-999.’</li>
<li><strong>missingValueCodeExplanation</strong>: Explanation for missing values, NA if no missing value code exists.</li>
</ul>
<p>You can create attributes manually by typing them out in R following a workflow similar to the one below:</p>
<div class="sourceCode" id="cb48"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb48-1"><a href="editing-eml.html#cb48-1" tabindex="-1"></a>attributes <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb48-2"><a href="editing-eml.html#cb48-2" tabindex="-1"></a>    </span>
<span id="cb48-3"><a href="editing-eml.html#cb48-3" tabindex="-1"></a>    <span class="at">attributeName =</span> <span class="fu">c</span>(<span class="st">&#39;Date&#39;</span>, <span class="st">&#39;Location&#39;</span>, <span class="st">&#39;Region&#39;</span>,<span class="st">&#39;Sample_No&#39;</span>, <span class="st">&#39;Sample_vol&#39;</span>, <span class="st">&#39;Salinity&#39;</span>, <span class="st">&#39;Temperature&#39;</span>, <span class="st">&#39;sampling_comments&#39;</span>),</span>
<span id="cb48-4"><a href="editing-eml.html#cb48-4" tabindex="-1"></a>    <span class="at">attributeDefinition =</span> <span class="fu">c</span>(<span class="st">&#39;Date sample was taken on&#39;</span>, <span class="st">&#39;Location code representing location where sample was taken&#39;</span>,<span class="st">&#39;Region where sample was taken&#39;</span>, <span class="st">&#39;Sample number&#39;</span>, <span class="st">&#39;Sample volume&#39;</span>, <span class="st">&#39;Salinity of sample in PSU&#39;</span>, <span class="st">&#39;Temperature of sample&#39;</span>, <span class="st">&#39;comments about sampling process&#39;</span>),</span>
<span id="cb48-5"><a href="editing-eml.html#cb48-5" tabindex="-1"></a>    <span class="at">measurementScale =</span> <span class="fu">c</span>(<span class="st">&#39;dateTime&#39;</span>, <span class="st">&#39;nominal&#39;</span>,<span class="st">&#39;nominal&#39;</span>, <span class="st">&#39;nominal&#39;</span>, <span class="st">&#39;ratio&#39;</span>, <span class="st">&#39;ratio&#39;</span>, <span class="st">&#39;interval&#39;</span>, <span class="st">&#39;nominal&#39;</span>),</span>
<span id="cb48-6"><a href="editing-eml.html#cb48-6" tabindex="-1"></a>    <span class="at">domain =</span> <span class="fu">c</span>(<span class="st">&#39;dateTimeDomain&#39;</span>, <span class="st">&#39;enumeratedDomain&#39;</span>,<span class="st">&#39;enumeratedDomain&#39;</span>, <span class="st">&#39;textDomain&#39;</span>, <span class="st">&#39;numericDomain&#39;</span>, <span class="st">&#39;numericDomain&#39;</span>, <span class="st">&#39;numericDomain&#39;</span>, <span class="st">&#39;textDomain&#39;</span>),</span>
<span id="cb48-7"><a href="editing-eml.html#cb48-7" tabindex="-1"></a>    <span class="at">formatString =</span> <span class="fu">c</span>(<span class="st">&#39;MM-DD-YYYY&#39;</span>, <span class="cn">NA</span>,<span class="cn">NA</span>,<span class="cn">NA</span>,<span class="cn">NA</span>,<span class="cn">NA</span>,<span class="cn">NA</span>,<span class="cn">NA</span>),</span>
<span id="cb48-8"><a href="editing-eml.html#cb48-8" tabindex="-1"></a>    <span class="at">definition =</span> <span class="fu">c</span>(<span class="cn">NA</span>,<span class="cn">NA</span>,<span class="cn">NA</span>,<span class="st">&#39;Sample number&#39;</span>, <span class="cn">NA</span>, <span class="cn">NA</span>, <span class="cn">NA</span>, <span class="st">&#39;comments about sampling process&#39;</span>),</span>
<span id="cb48-9"><a href="editing-eml.html#cb48-9" tabindex="-1"></a>    <span class="at">unit =</span> <span class="fu">c</span>(<span class="cn">NA</span>, <span class="cn">NA</span>, <span class="cn">NA</span>, <span class="cn">NA</span>,<span class="st">&#39;milliliter&#39;</span>, <span class="st">&#39;dimensionless&#39;</span>, <span class="st">&#39;celsius&#39;</span>, <span class="cn">NA</span>),</span>
<span id="cb48-10"><a href="editing-eml.html#cb48-10" tabindex="-1"></a>    <span class="at">numberType =</span> <span class="fu">c</span>(<span class="cn">NA</span>, <span class="cn">NA</span>, <span class="cn">NA</span>,<span class="cn">NA</span>, <span class="st">&#39;real&#39;</span>, <span class="st">&#39;real&#39;</span>, <span class="st">&#39;real&#39;</span>, <span class="cn">NA</span>),</span>
<span id="cb48-11"><a href="editing-eml.html#cb48-11" tabindex="-1"></a>    <span class="at">missingValueCode =</span> <span class="fu">c</span>(<span class="cn">NA</span>, <span class="cn">NA</span>, <span class="cn">NA</span>,<span class="cn">NA</span>, <span class="cn">NA</span>, <span class="cn">NA</span>, <span class="cn">NA</span>, <span class="st">&#39;NA&#39;</span>),</span>
<span id="cb48-12"><a href="editing-eml.html#cb48-12" tabindex="-1"></a>    <span class="at">missingValueCodeExplanation =</span> <span class="fu">c</span>(<span class="cn">NA</span>, <span class="cn">NA</span>, <span class="cn">NA</span>,<span class="cn">NA</span>, <span class="cn">NA</span>, <span class="cn">NA</span>, <span class="cn">NA</span>, <span class="st">&#39;no sampling comments&#39;</span>))</span></code></pre></div>
<p>However, typing this out in R can be a major pain. Luckily, there’s a Shiny app that you can use to build attribute information. You can use the app to build attributes from a data file loaded into R (recommended as the app will auto-fill some fields for you) to edit an existing attribute table, or to create attributes from scratch. Use the following commands to create or modify attributes (these commands will launch a Shiny app in your web browser):</p>
<div class="sourceCode" id="cb49"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb49-1"><a href="editing-eml.html#cb49-1" tabindex="-1"></a><span class="co">#first download the CSV in your data package from Exercise #2</span></span>
<span id="cb49-2"><a href="editing-eml.html#cb49-2" tabindex="-1"></a>data_pid <span class="ot">&lt;-</span> <span class="fu">selectMember</span>(dp, <span class="at">name =</span> <span class="st">&quot;sysmeta@fileName&quot;</span>, <span class="at">value =</span> <span class="st">&quot;.csv&quot;</span>)</span>
<span id="cb49-3"><a href="editing-eml.html#cb49-3" tabindex="-1"></a>data <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="at">text=</span><span class="fu">rawToChar</span>(<span class="fu">getObject</span>(d1c_test<span class="sc">@</span>mn, data_pid)))</span></code></pre></div>
<div class="sourceCode" id="cb50"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb50-1"><a href="editing-eml.html#cb50-1" tabindex="-1"></a><span class="co"># From data (recommended)</span></span>
<span id="cb50-2"><a href="editing-eml.html#cb50-2" tabindex="-1"></a>EML<span class="sc">::</span><span class="fu">shiny_attributes</span>(<span class="at">data =</span> data)</span>
<span id="cb50-3"><a href="editing-eml.html#cb50-3" tabindex="-1"></a></span>
<span id="cb50-4"><a href="editing-eml.html#cb50-4" tabindex="-1"></a><span class="co"># From an existing attribute table</span></span>
<span id="cb50-5"><a href="editing-eml.html#cb50-5" tabindex="-1"></a>attributeList <span class="ot">&lt;-</span> <span class="fu">get_attributes</span>(doc<span class="sc">$</span>dataset<span class="sc">$</span>dataTable[[i]]<span class="sc">$</span>attributeList)</span>
<span id="cb50-6"><a href="editing-eml.html#cb50-6" tabindex="-1"></a>EML<span class="sc">::</span><span class="fu">shiny_attributes</span>(<span class="at">data =</span> <span class="cn">NULL</span>, <span class="at">attributes =</span> attributeList<span class="sc">$</span>attributes)</span>
<span id="cb50-7"><a href="editing-eml.html#cb50-7" tabindex="-1"></a></span>
<span id="cb50-8"><a href="editing-eml.html#cb50-8" tabindex="-1"></a><span class="co"># From scratch</span></span>
<span id="cb50-9"><a href="editing-eml.html#cb50-9" tabindex="-1"></a>atts <span class="ot">&lt;-</span> EML<span class="sc">::</span><span class="fu">shiny_attributes</span>()</span></code></pre></div>
<p>Once you are done editing a table in the app, quit the app and the tables will be assigned to the <code>atts</code> variable as a list of data frames (one for attributes, factors, and units). Alternatively, each table can be to exported to a csv file by clicking the <code>Download</code> button.</p>
<p>If you downloaded the table, read the table back into your R session and assign it to a variable in your script (e.g. <code>attributes &lt;- data.frame(...)</code>), or just use the variable that <code>shiny_attributes</code> returned.</p>
<p>For simple attribute corrections, <code>datamgmt::edit_attribute()</code> allows you to edit the slots of a single attribute within an attribute list. To use this function, pass an attribute through <code>datamgmt::edit_attribute()</code> and fill out the parameters you wish to edit/update. An example is provided below where we are changing <code>attributeName</code>, <code>domain</code>, and <code>measurementScale</code> in the first attribute of a dataset. After completing the edits, insert the new version of the attribute back into the EML document.</p>
<div class="sourceCode" id="cb51"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb51-1"><a href="editing-eml.html#cb51-1" tabindex="-1"></a>new_attribute <span class="ot">&lt;-</span> datamgmt<span class="sc">::</span><span class="fu">edit_attribute</span>(doc<span class="sc">$</span>dataset<span class="sc">$</span>dataTable[[<span class="dv">1</span>]]<span class="sc">$</span>attributeList<span class="sc">$</span>attribute[[<span class="dv">1</span>]], <span class="at">attributeName =</span> <span class="st">&#39;date_and_time&#39;</span>, <span class="at">domain =</span> <span class="st">&#39;dateTimeDomain&#39;</span>, <span class="at">measurementScale =</span> <span class="st">&#39;dateTime&#39;</span>)</span>
<span id="cb51-2"><a href="editing-eml.html#cb51-2" tabindex="-1"></a>doc<span class="sc">$</span>dataset<span class="sc">$</span>dataTable[[<span class="dv">1</span>]]<span class="sc">$</span>attributeList<span class="sc">$</span>attribute[[<span class="dv">1</span>]] <span class="ot">&lt;-</span> new_attribute</span></code></pre></div>
</div>
<div id="edit-custom-units" class="section level3 hasAnchor" number="4.3.2">
<h3><span class="header-section-number">4.3.2</span> Edit custom units<a href="editing-eml.html#edit-custom-units" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>EML has a set list of units that can be added to an EML file. These can be seen by using the following code:</p>
<div class="sourceCode" id="cb52"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb52-1"><a href="editing-eml.html#cb52-1" tabindex="-1"></a>standardUnits <span class="ot">&lt;-</span> EML<span class="sc">::</span><span class="fu">get_unitList</span>()</span>
<span id="cb52-2"><a href="editing-eml.html#cb52-2" tabindex="-1"></a><span class="fu">View</span>(standardUnits<span class="sc">$</span>units)</span></code></pre></div>
<p>Search the units list for your unit before attempting to create a custom unit. You can search part of the unit you can look up part of the unit ie <code>meters</code> in the table to see if there are any matches.</p>
<p>If you have units that are not in the standard EML unit list, you will need to build a custom unit list. A unit typically consists of the following fields:</p>
<ul>
<li><strong>id</strong>: The <code>unit id</code> (ids are camelCased)</li>
<li><strong>unitType</strong>: The <code>unitType</code> (run <code>View(standardUnits$unitTypes)</code> to see standard <code>unitType</code>s)</li>
<li><strong>parentSI</strong>: The <code>parentSI</code> unit (e.g. for kilometer <code>parentSI</code> = “meter”)</li>
<li><strong>multiplierToSI</strong>: Multiplier to the <code>parentSI</code> unit (e.g. for kilometer <code>multiplierToSI</code> = 1000)</li>
<li><strong>name</strong>: Unit abbreviation (e.g. for kilometer <code>name</code> = “km”)</li>
<li><strong>description</strong>: Text defining the unit (e.g. for kilometer <code>description</code> = “1000 meters”)</li>
</ul>
<p>To manually generate the custom units list, create a dataframe with the fields mentioned above. An example is provided below that can be used as a template:</p>
<div class="sourceCode" id="cb53"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb53-1"><a href="editing-eml.html#cb53-1" tabindex="-1"></a>custom_units <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb53-2"><a href="editing-eml.html#cb53-2" tabindex="-1"></a>    </span>
<span id="cb53-3"><a href="editing-eml.html#cb53-3" tabindex="-1"></a>  <span class="at">id =</span> <span class="fu">c</span>(<span class="st">&#39;siemensPerMeter&#39;</span>, <span class="st">&#39;decibar&#39;</span>),</span>
<span id="cb53-4"><a href="editing-eml.html#cb53-4" tabindex="-1"></a>  <span class="at">unitType =</span> <span class="fu">c</span>(<span class="st">&#39;resistivity&#39;</span>, <span class="st">&#39;pressure&#39;</span>),</span>
<span id="cb53-5"><a href="editing-eml.html#cb53-5" tabindex="-1"></a>  <span class="at">parentSI =</span> <span class="fu">c</span>(<span class="st">&#39;ohmMeter&#39;</span>, <span class="st">&#39;pascal&#39;</span>),</span>
<span id="cb53-6"><a href="editing-eml.html#cb53-6" tabindex="-1"></a>  <span class="at">multiplierToSI =</span> <span class="fu">c</span>(<span class="st">&#39;1&#39;</span>,<span class="st">&#39;10000&#39;</span>),</span>
<span id="cb53-7"><a href="editing-eml.html#cb53-7" tabindex="-1"></a>  <span class="at">abbreviation =</span> <span class="fu">c</span>(<span class="st">&#39;S/m&#39;</span>,<span class="st">&#39;decibar&#39;</span>),</span>
<span id="cb53-8"><a href="editing-eml.html#cb53-8" tabindex="-1"></a>  <span class="at">description =</span> <span class="fu">c</span>(<span class="st">&#39;siemens per meter&#39;</span>, <span class="st">&#39;decibar&#39;</span>))</span></code></pre></div>
<p>Using <code>EML::get_unit_id</code> for custom units will also generate valid EML unit ids.</p>
<p>Custom units are then added to <code>additionalMetadata</code> using the following command:</p>
<div class="sourceCode" id="cb54"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb54-1"><a href="editing-eml.html#cb54-1" tabindex="-1"></a>unitlist <span class="ot">&lt;-</span> <span class="fu">set_unitList</span>(custom_units, <span class="at">as_metadata =</span> <span class="cn">TRUE</span>)</span>
<span id="cb54-2"><a href="editing-eml.html#cb54-2" tabindex="-1"></a>doc<span class="sc">$</span>additionalMetadata <span class="ot">&lt;-</span>  <span class="fu">list</span>(<span class="at">metadata =</span> <span class="fu">list</span>(<span class="at">unitList =</span> unitlist))</span></code></pre></div>
</div>
<div id="edit-factors" class="section level3 hasAnchor" number="4.3.3">
<h3><span class="header-section-number">4.3.3</span> Edit factors<a href="editing-eml.html#edit-factors" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>For attributes that are <code>enumeratedDomains</code>, a table is needed with three columns: <code>attributeName</code>, <code>code</code>, and <code>definition</code>.</p>
<ul>
<li><strong>attributeName</strong> should be the same as the <code>attributeName</code> within the attribute table and repeated for all codes belonging to a common attribute.</li>
<li><strong>code</strong> should contain all unique values of the given <code>attributeName</code> that exist within the actual data.</li>
<li><strong>definition</strong> should contain a plain text definition that describes each code.</li>
</ul>
<p>To build factors by hand, you use the named character vectors and then convert them to a data.frame as shown in the example below. In this example, there are two enumerated domains in the attribute list - “Location” and “Region”.</p>
<div class="sourceCode" id="cb55"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb55-1"><a href="editing-eml.html#cb55-1" tabindex="-1"></a>Location <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="at">CASC =</span> <span class="st">&#39;Cascade Lake&#39;</span>, <span class="at">CHIK =</span> <span class="st">&#39;Chikumunik Lake&#39;</span>, <span class="at">HEAR =</span> <span class="st">&#39;Heart Lake&#39;</span>, <span class="at">NISH =</span> <span class="st">&#39;Nishlik Lake&#39;</span> )</span>
<span id="cb55-2"><a href="editing-eml.html#cb55-2" tabindex="-1"></a>Region <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="at">W_MTN =</span> <span class="st">&#39;West region, locations West of Eagle Mountain&#39;</span>, <span class="at">E_MTN =</span> <span class="st">&#39;East region, locations East of Eagle Mountain&#39;</span>)</span></code></pre></div>
<p>The definitions are then written into a data.frame using the names of the named character vectors and their definitions.</p>
<div class="sourceCode" id="cb56"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb56-1"><a href="editing-eml.html#cb56-1" tabindex="-1"></a>factors <span class="ot">&lt;-</span> <span class="fu">rbind</span>(<span class="fu">data.frame</span>(<span class="at">attributeName =</span> <span class="st">&#39;Location&#39;</span>, <span class="at">code =</span> <span class="fu">names</span>(Location), <span class="at">definition =</span> <span class="fu">unname</span>(Location)),</span>
<span id="cb56-2"><a href="editing-eml.html#cb56-2" tabindex="-1"></a>                  <span class="fu">data.frame</span>(<span class="at">attributeName =</span> <span class="st">&#39;Region&#39;</span>, <span class="at">code =</span> <span class="fu">names</span>(Region), <span class="at">definition =</span> <span class="fu">unname</span>(Region)))</span></code></pre></div>
</div>
<div id="finalize-attributelist" class="section level3 hasAnchor" number="4.3.4">
<h3><span class="header-section-number">4.3.4</span> Finalize attributeList<a href="editing-eml.html#finalize-attributelist" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Once you have built your attributes, factors, and custom units, you can add them to EML objects. Attributes and factors are combined to form an <code>attributeList</code> using the following command:</p>
<div class="sourceCode" id="cb57"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb57-1"><a href="editing-eml.html#cb57-1" tabindex="-1"></a>attributeList <span class="ot">&lt;-</span> EML<span class="sc">::</span><span class="fu">set_attributes</span>(<span class="at">attributes =</span> attributes,</span>
<span id="cb57-2"><a href="editing-eml.html#cb57-2" tabindex="-1"></a>                                     <span class="at">factors =</span> factors) </span></code></pre></div>
<p>This <code>attributeList</code> must then be <a href="editing-eml.html#edit-datatables">added to a <code>dataTable</code></a>.</p>
<div class="note">
<p>
Remember to use:
<code>d1c_test &lt;- dataone::D1Client(“STAGING”, “<a href="urn:node:mnTestARCTIC" class="uri">urn:node:mnTestARCTIC</a>”)</code>
<code><a href="mailto:d1c_test@mn" class="email">d1c_test@mn</a></code>
</p>
</div>
</div>
</div>
<div id="set-physical" class="section level2 hasAnchor" number="4.4">
<h2><span class="header-section-number">4.4</span> Set physical<a href="editing-eml.html#set-physical" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>To set the <code>physical</code> aspects of a data object, use the following commands to build a <code>physical</code> object from a data <code>PID</code> that exists in your package. <strong>Remember to <a href = 'https://nceas.github.io/datateam-training/reference/set-dataone-nodes.html' target='_blank'>set the member node</a> to test.arcticdata.io!</strong></p>
<div class="note">
<p>
The word ‘physical’ derives from database systems, which distinguish
the ‘logical’ model (e.g., what attributes are in a table, etc) from the
physical model (how the data are written to a physical hard disk
(basically, the serialization). so, we grouped metadata about the file
(eg. dataformat, file size, file name) as written to disk in
physical.
</p>
</div>
<div class="sourceCode" id="cb58"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb58-1"><a href="editing-eml.html#cb58-1" tabindex="-1"></a>data_pid <span class="ot">&lt;-</span> <span class="fu">selectMember</span>(dp, <span class="at">name =</span> <span class="st">&quot;sysmeta@fileName&quot;</span>, <span class="at">value =</span> <span class="st">&quot;your_file_name.csv&quot;</span>)</span>
<span id="cb58-2"><a href="editing-eml.html#cb58-2" tabindex="-1"></a>physical <span class="ot">&lt;-</span> arcticdatautils<span class="sc">::</span><span class="fu">pid_to_eml_physical</span>(mn, data_pid)</span></code></pre></div>
<p>The <code>physical</code> must then be assigned to the data object.</p>
<p>Note that the above workflow only works if your data object already exists on the member node.</p>
</div>
<div id="edit-datatables" class="section level2 hasAnchor" number="4.5">
<h2><span class="header-section-number">4.5</span> Edit dataTables<a href="editing-eml.html#edit-datatables" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>To edit a <code>dataTable</code>, first <a href="editing-eml.html#edit-attributelists">edit/create an <code>attributeList</code></a> and <a href="editing-eml.html#set-physical">set the physical</a>.
Then create a new <code>dataTable</code> using the <code>eml$dataTable()</code> helper function as below:</p>
<div class="sourceCode" id="cb59"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb59-1"><a href="editing-eml.html#cb59-1" tabindex="-1"></a>dataTable <span class="ot">&lt;-</span> eml<span class="sc">$</span><span class="fu">dataTable</span>(<span class="at">entityName =</span> <span class="st">&quot;A descriptive name for the data (does not need to be the same as the data file)&quot;</span>,</span>
<span id="cb59-2"><a href="editing-eml.html#cb59-2" tabindex="-1"></a>                 <span class="at">entityDescription =</span> <span class="st">&quot;A description of the data&quot;</span>,</span>
<span id="cb59-3"><a href="editing-eml.html#cb59-3" tabindex="-1"></a>                 <span class="at">physical =</span> physical,</span>
<span id="cb59-4"><a href="editing-eml.html#cb59-4" tabindex="-1"></a>                 <span class="at">attributeList =</span> attributeList)</span></code></pre></div>
<p>The <code>dataTable</code> must then be added to the EML. How exactly you do this will depend on whether there are <code>dataTable</code> elements in your EML, and how many there are. To replace whatever dataTable elements already exist, you could write:</p>
<div class="sourceCode" id="cb60"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb60-1"><a href="editing-eml.html#cb60-1" tabindex="-1"></a>doc<span class="sc">$</span>dataset<span class="sc">$</span>dataTable <span class="ot">&lt;-</span> dataTable</span></code></pre></div>
<p>If there is only one <code>dataTable</code> in your dataset, the EML package will usually “unpack” these, so that it is not contained within a list of length 1 - this means that to add a second <code>dataTable</code>, you cannot use the syntax <code>doc$dataset$dataTable[[2]]</code>, since when unpacked this will contain the <code>entityDescription</code> as opposed to pointing to the second in a series of <code>dataTable</code> elements. Confusing - I know. Not to fear though - this syntax will get you on your way, should you be trying to add a second <code>dataTable</code>.</p>
<div class="sourceCode" id="cb61"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb61-1"><a href="editing-eml.html#cb61-1" tabindex="-1"></a>doc<span class="sc">$</span>dataset<span class="sc">$</span>dataTable <span class="ot">&lt;-</span> <span class="fu">list</span>(doc<span class="sc">$</span>dataset<span class="sc">$</span>dataTable, dataTable)</span></code></pre></div>
<p>If there is more than one <code>dataTable</code> in your dataset, you can return to the more straightforward construction of:</p>
<div class="sourceCode" id="cb62"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb62-1"><a href="editing-eml.html#cb62-1" tabindex="-1"></a>doc<span class="sc">$</span>dataset<span class="sc">$</span>dataTable[[i]] <span class="ot">&lt;-</span> dataTable </span></code></pre></div>
<p>Where <code>i</code> is the index that you wish insert your <code>dataTable</code> into.</p>
<p>To add a list of <code>dataTables</code> to avoid the unpacking problem above you will need to create a list of <code>dataTables</code></p>
<div class="sourceCode" id="cb63"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb63-1"><a href="editing-eml.html#cb63-1" tabindex="-1"></a>dts <span class="ot">&lt;-</span> <span class="fu">list</span>() <span class="co"># create an empty list</span></span>
<span id="cb63-2"><a href="editing-eml.html#cb63-2" tabindex="-1"></a><span class="cf">for</span>(i <span class="cf">in</span> <span class="fu">seq_along</span>(tables_you_need)){</span>
<span id="cb63-3"><a href="editing-eml.html#cb63-3" tabindex="-1"></a>  <span class="co"># your code modifying/creating the dataTable here</span></span>
<span id="cb63-4"><a href="editing-eml.html#cb63-4" tabindex="-1"></a>  dataTable <span class="ot">&lt;-</span> eml<span class="sc">$</span><span class="fu">dataTable</span>(<span class="at">entityName =</span> dataTable<span class="sc">$</span>entityName,</span>
<span id="cb63-5"><a href="editing-eml.html#cb63-5" tabindex="-1"></a>                             <span class="at">entityDescription =</span> dataTable<span class="sc">$</span>entityDescription,</span>
<span id="cb63-6"><a href="editing-eml.html#cb63-6" tabindex="-1"></a>                             <span class="at">physical =</span> physical,</span>
<span id="cb63-7"><a href="editing-eml.html#cb63-7" tabindex="-1"></a>                             <span class="at">attributeList =</span> attributeList)</span>
<span id="cb63-8"><a href="editing-eml.html#cb63-8" tabindex="-1"></a>  </span>
<span id="cb63-9"><a href="editing-eml.html#cb63-9" tabindex="-1"></a>  dts[[i]] <span class="ot">&lt;-</span> dataTable <span class="co"># add to the list</span></span>
<span id="cb63-10"><a href="editing-eml.html#cb63-10" tabindex="-1"></a>}</span></code></pre></div>
<p>After getting a list of <code>dataTables</code>, assign the resulting list to <code>dataTable</code> EML</p>
<div class="sourceCode" id="cb64"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb64-1"><a href="editing-eml.html#cb64-1" tabindex="-1"></a>doc<span class="sc">$</span>dataset<span class="sc">$</span>dataTable <span class="ot">&lt;-</span> dts</span></code></pre></div>
<p>By default, the online submission form adds all entities as <code>otherEntity</code>, even when most should probably be <code>dataTable</code>. You can use <code>eml_otherEntity_to_dataTable</code> to easily move items in <code>otherEntity</code> over to <code>dataTable</code>. Most tabular data or data that contain variables should be listed as a <code>dataTable</code>. Data that do not contain variables (eg: plain text readme files, pdfs, jpegs) should be listed as <code>otherEntity</code>.</p>
<div class="sourceCode" id="cb65"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb65-1"><a href="editing-eml.html#cb65-1" tabindex="-1"></a><span class="fu">eml_otherEntity_to_dataTable</span>(doc, </span>
<span id="cb65-2"><a href="editing-eml.html#cb65-2" tabindex="-1"></a>                             <span class="dv">1</span>, <span class="co"># which otherEntities you want to convert, for multiple use - 1:5</span></span>
<span id="cb65-3"><a href="editing-eml.html#cb65-3" tabindex="-1"></a>                             <span class="at">validate_eml =</span> F) <span class="co"># set this to False if the physical or attributes are not added</span></span></code></pre></div>
</div>
<div id="edit-otherentities" class="section level2 hasAnchor" number="4.6">
<h2><span class="header-section-number">4.6</span> Edit otherEntities<a href="editing-eml.html#edit-otherentities" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div id="remove-otherentities" class="section level3 hasAnchor" number="4.6.1">
<h3><span class="header-section-number">4.6.1</span> Remove otherEntities<a href="editing-eml.html#remove-otherentities" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>To remove an <code>otherEntity</code> use the following command. This may be useful if a data object is originally listed as an <code>otherEntity</code> and then transferred to a <code>dataTable</code>.</p>
<div class="sourceCode" id="cb66"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb66-1"><a href="editing-eml.html#cb66-1" tabindex="-1"></a>doc<span class="sc">$</span>dataset<span class="sc">$</span>otherEntity[[i]] <span class="ot">&lt;-</span> <span class="cn">NULL</span></span></code></pre></div>
</div>
<div id="create-otherentities" class="section level3 hasAnchor" number="4.6.2">
<h3><span class="header-section-number">4.6.2</span> Create otherEntities<a href="editing-eml.html#create-otherentities" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>If you need to create/update an <code>otherEntity</code>, make sure to <a href = 'https://nceas.github.io/datateam-training/reference/publish-an-object.html#publish-an-object' target='_blank'>publish</a> or <a href = 'https://nceas.github.io/datateam-training/reference/edit-otherentities.html#update-a-data-file' target='_blank'>update</a> your data object first (if it is not already on the DataONE MN). Then build your <code>otherEntity</code>.</p>
<div class="sourceCode" id="cb67"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb67-1"><a href="editing-eml.html#cb67-1" tabindex="-1"></a>otherEntity <span class="ot">&lt;-</span> arcticdatautils<span class="sc">::</span><span class="fu">pid_to_eml_entity</span>(mn, pkg<span class="sc">$</span>data[[i]])</span></code></pre></div>
<p>Alternatively, you can build the <code>otherEntity</code> of a data object not in your package by simply inputting the data <code>PID</code>.</p>
<div class="sourceCode" id="cb68"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb68-1"><a href="editing-eml.html#cb68-1" tabindex="-1"></a>otherEntity <span class="ot">&lt;-</span> arcticdatautils<span class="sc">::</span><span class="fu">pid_to_eml_entity</span>(mn, <span class="st">&quot;your_data_pid&quot;</span>, <span class="at">entityType =</span> <span class="st">&quot;otherEntity&quot;</span>, <span class="at">entityName =</span> <span class="st">&quot;Entity Name&quot;</span>, <span class="at">entityDescription =</span> <span class="st">&quot;Description about entity&quot;</span>)</span></code></pre></div>
<p>The <code>otherEntity</code> must then be set to the EML, like so:</p>
<div class="sourceCode" id="cb69"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb69-1"><a href="editing-eml.html#cb69-1" tabindex="-1"></a>doc<span class="sc">$</span>dataset<span class="sc">$</span>otherEntity <span class="ot">&lt;-</span> otherEntity</span></code></pre></div>
<p>If you have more than one <code>otherEntity</code> object in the EML already, you can add the new one like this:</p>
<div class="sourceCode" id="cb70"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb70-1"><a href="editing-eml.html#cb70-1" tabindex="-1"></a>doc<span class="sc">$</span>dataset<span class="sc">$</span>otherEntity[[i]] <span class="ot">&lt;-</span> otherEntity</span></code></pre></div>
<p>Where <code>i</code> is set to the number of existing entities plus one.</p>
<p>Remember the warning from the last section, however. If you only have one <code>otherEntity</code>, and you are trying to add another, you have to run:</p>
<div class="sourceCode" id="cb71"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb71-1"><a href="editing-eml.html#cb71-1" tabindex="-1"></a>doc<span class="sc">$</span>dataset<span class="sc">$</span>otherEntity <span class="ot">&lt;-</span> <span class="fu">list</span>(otherEntity, doc<span class="sc">$</span>dataset<span class="sc">$</span>otherEntity)</span></code></pre></div>
</div>
</div>
<div id="semantic-annotations" class="section level2 hasAnchor" number="4.7">
<h2><span class="header-section-number">4.7</span> Semantic annotations<a href="editing-eml.html#semantic-annotations" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>For a brief overview of what a semantic annotation is, and why we use them check out <a href="https://drive.google.com/file/d/1Err-fL8O21kd1NzHJ9HJkK_B2fpt4sQW/view?usp=sharing">this video.</a></p>
<p>Even more information on how to add semantic annotations to EML 2.2.0 can be found
<a href = 'https://eml.ecoinformatics.org/semantic-annotation-primer.html'>here</a>. Currently metacatUI does not support the editing of semantic annotations on the website so all changes will have to be done in R.</p>
<p>There are several elements in the EML 2.2.0 schema that can be annotated:</p>
<ul>
<li><code>dataset</code></li>
<li>entity (eg: <code>otherEntity</code> or <code>dataTable</code>)</li>
<li><code>attribute</code></li>
</ul>
<p>On the datateam, we will only be adding annotations to attributes for now.</p>
<div id="how-annotations-are-used" class="section level3 hasAnchor" number="4.7.1">
<h3><span class="header-section-number">4.7.1</span> How annotations are used<a href="editing-eml.html#how-annotations-are-used" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>This is a <a href = 'https://arcticdata.io/catalog/view/doi%3A10.18739%2FA2KW57J9Q'>dataset</a> that has semantic annotations included.</p>
<p>On the website you can see annotations in each of the attributes.
<img src="../images/annotations_web.png" /></p>
<p>You can click on any one of them to search for more datasets with that same annotation.
<img src="../images/annotations_web_use.png" /></p>
<div id="attribute-level-annotations" class="section level4 hasAnchor" number="4.7.1.1">
<h4><span class="header-section-number">4.7.1.1</span> Attribute-level annotations<a href="editing-eml.html#attribute-level-annotations" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>To add annotations to the <code>attributeList</code> you will need information about the <code>propertyURI</code> and <code>valueURI</code></p>
<p>Annotations are essentially composed of a sentence, which contains a subject (the attribute), predicate (<code>propertyURI</code>),
and object (<code>valueURI</code>). Because of the way our search interface is built, for now we will be using attribute annotations that have a <code>propertyURI</code> label of “contains measurements of type”.</p>
<p>Here is what an annotation for an attribute looks like in R. Note that both the <code>propertyURI</code> and <code>valueURI</code> have both a label, and the URI itself.</p>
<div class="sourceCode" id="cb72"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb72-1"><a href="editing-eml.html#cb72-1" tabindex="-1"></a>doc<span class="sc">$</span>dataset<span class="sc">$</span>dataTable[[i]]<span class="sc">$</span>attributeList<span class="sc">$</span>attribute[[i]]<span class="sc">$</span>annotation</span></code></pre></div>
<pre><code>$id
[1] &quot;ODBcOyaTsg&quot;

$propertyURI
$propertyURI$label
[1] &quot;contains measurements of type&quot;

$propertyURI$propertyURI
[1] &quot;http://ecoinformatics.org/oboe/oboe.1.2/oboe-core.owl#containsMeasurementsOfType&quot;


$valueURI
$valueURI$label
[1] &quot;Distributed Biological Observatory region identifier&quot;

$valueURI$valueURI
[1] &quot;http://purl.dataone.org/odo/ECSO_00002617&quot;</code></pre>
<div class="note">
<p>
Semantic attribute annotations can be applied to spatialRasters,
spatialVectors and dataTables
</p>
</div>
</div>
</div>
<div id="how-to-add-an-annotation" class="section level3 hasAnchor" number="4.7.2">
<h3><span class="header-section-number">4.7.2</span> How to add an annotation<a href="editing-eml.html#how-to-add-an-annotation" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p><strong>1. Decide which variable to annotate</strong></p>
<p>The goal for the datateam is to start annotating every dataset that comes in. Please make sure to add semantic annotations to spatial and temporal features such as latitude, longitude, site name and date and aim to annotate as many attributes as possible.</p>
<p><strong>2. Find an appropriate <code>valueURI</code></strong></p>
<p>The next step is to find an appropriate value to fill in the blank of the sentence: “this attribute contains measurements of _____.”</p>
<p>There are several ontologies to search in. In order of most to least likely to be relevant to the Arctic Data Center they are:</p>
<ul>
<li><a href="http://bioportal.bioontology.org/ontologies/ECSO/?p=classes&amp;conceptid=http://purl.dataone.org/odo/ECSO_00002925">The Ecosystem Ontology (ECSO)</a>
<ul>
<li>this was developed at NCEAS, and has many terms that are relevant to ecosystem processes, especially those involving carbon and nutrient cycling</li>
</ul></li>
<li><a href="http://bioportal.bioontology.org/ontologies/ENVO/?p=classes&amp;conceptid=root">The Environment Ontology (EnVO)</a>
<ul>
<li>this is an ontology for the concise, controlled description of environments</li>
</ul></li>
<li><a href="http://bioportal.bioontology.org/ontologies/NCBITAXON/?p=classes&amp;conceptid=root">National Center for Biotechnology Information (NCBI) Organismal Classification (NCBITAXON)</a>
<ul>
<li>The NCBI Taxonomy Database is a curated classification and nomenclature for all of the organisms in the public sequence databases.</li>
</ul></li>
<li><a href="http://bioportal.bioontology.org/ontologies/IAO/?p=summary">Information Artifact Ontology (IAO)</a>
<ul>
<li>this ontology contains terms related to information entities (eg: journals, articles, datasets, identifiers)</li>
</ul></li>
</ul>
<p>To search, navigate through the “classes” until you find an appropriate term. When we are picking terms, it is important that we not just pick a similar term or a term that seems close - we want a term that is totally “right”. For example, if you have an attribute for carbon tetroxide flux and an ontology with a class hierarchy like this:</p>
<p>– carbon flux<br />
|—- carbon dioxide flux</p>
<p>Our exact attribute, carbon tetroxide flux is not listed. In this case, we should pick “carbon flux” as it’s completely correct and not “carbon dioxide flux” because it’s more specific but not quite right.</p>
<div class="note">
<p>
For general attributes (such as ones named depth or length), it is
important to be as specific as possible about what is being
measured.
</p>
<p>
e.g. selecting the lake area annotation for the <a
href="https://arcticdata.io/catalog/view/urn%3Auuid%3A64a3a75b-0630-44d2-a7e7-519029a48d9d#urn%3Auuid%3Ab8c29251-e628-405a-8e66-a5fa55703904">area
attribute</a> in this dataset
</p>
</div>
<p><strong>3. Build the annotation in R</strong></p>
<div id="manually-annotating" class="section level4 hasAnchor" number="4.7.2.1">
<h4><span class="header-section-number">4.7.2.1</span> Manually Annotating<a href="editing-eml.html#manually-annotating" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p><em>this method is great for when you are inserting 1 annotation, fixing an existing annotation or programmatically updating annotations for multiple attributeLists</em></p>
<p>First you need to figure out the index of the attribute you want to annotate.</p>
<div class="sourceCode" id="cb74"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb74-1"><a href="editing-eml.html#cb74-1" tabindex="-1"></a><span class="fu">eml_get_simple</span>(doc<span class="sc">$</span>dataset<span class="sc">$</span>dataTable[[<span class="dv">3</span>]]<span class="sc">$</span>attributeList, <span class="st">&quot;attributeName&quot;</span>)</span></code></pre></div>
<pre><code> [1] &quot;prdM&quot;         &quot;t090C&quot;        &quot;t190C&quot;        &quot;c0mS/cm&quot;      &quot;c1mS/cm&quot;      &quot;sal00&quot;        &quot;sal11&quot;        &quot;sbeox0V&quot;      &quot;flECO-AFL&quot;
[10] &quot;CStarTr0&quot;     &quot;cpar&quot;         &quot;v0&quot;           &quot;v4&quot;           &quot;v6&quot;           &quot;v7&quot;           &quot;svCM&quot;         &quot;altM&quot;         &quot;depSM&quot;    
[19] &quot;scan&quot;         &quot;sbeox0ML/L&quot;   &quot;sbeox0dOV/dT&quot; &quot;flag&quot;    </code></pre>
<p>Next, assign an <code>id</code> to the attribute. It should be unique within the document, and it’s nice if it is human readable and related to the attribute it is describing. One format you could use is <code>entity_x_attribute_y</code> which should be unique in scope, and is nice and descriptive.</p>
<div class="sourceCode" id="cb76"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb76-1"><a href="editing-eml.html#cb76-1" tabindex="-1"></a>doc<span class="sc">$</span>dataset<span class="sc">$</span>dataTable[[<span class="dv">3</span>]]<span class="sc">$</span>attributeList<span class="sc">$</span>attribute[[<span class="dv">6</span>]]<span class="sc">$</span>id <span class="ot">&lt;-</span> <span class="st">&quot;entity_ctd_attribute_salinity&quot;</span></span></code></pre></div>
<p>Now, assign the <code>propertyURI</code> information. This will be the same for every annotation you build.</p>
<div class="sourceCode" id="cb77"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb77-1"><a href="editing-eml.html#cb77-1" tabindex="-1"></a>doc<span class="sc">$</span>dataset<span class="sc">$</span>dataTable[[<span class="dv">3</span>]]<span class="sc">$</span>attributeList<span class="sc">$</span>attribute[[<span class="dv">6</span>]]<span class="sc">$</span>annotation<span class="sc">$</span>propertyURI <span class="ot">&lt;-</span> <span class="fu">list</span>(<span class="at">label =</span> <span class="st">&quot;contains measurements of type&quot;</span>,</span>
<span id="cb77-2"><a href="editing-eml.html#cb77-2" tabindex="-1"></a>                                                                                       <span class="at">propertyURI =</span> <span class="st">&quot;http://ecoinformatics.org/oboe/oboe.1.2/oboe-core.owl#containsMeasurementsOfType&quot;</span>)</span></code></pre></div>
<p>Finally, add the <code>valueURI</code> information from your search.</p>
<p><img src="../images/bioportal_term.png" />
You should see an ID on the Bioportal page that looks like a URL - this is the <code>valueURI</code>. Use the value to populate the label element.</p>
<div class="sourceCode" id="cb78"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb78-1"><a href="editing-eml.html#cb78-1" tabindex="-1"></a>doc<span class="sc">$</span>dataset<span class="sc">$</span>dataTable[[<span class="dv">3</span>]]<span class="sc">$</span>attributeList<span class="sc">$</span>attribute[[<span class="dv">6</span>]]<span class="sc">$</span>annotation<span class="sc">$</span>valueURI <span class="ot">&lt;-</span> <span class="fu">list</span>(<span class="at">label =</span> <span class="st">&quot;Water Salinity&quot;</span>,</span>
<span id="cb78-2"><a href="editing-eml.html#cb78-2" tabindex="-1"></a>                                                                                       <span class="at">valueURI =</span> <span class="st">&quot;http://purl.dataone.org/odo/ECSO_00001164&quot;</span>)</span></code></pre></div>
</div>
<div id="shiny-attributes" class="section level4 hasAnchor" number="4.7.2.2">
<h4><span class="header-section-number">4.7.2.2</span> Shiny Attributes<a href="editing-eml.html#shiny-attributes" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p><em>this method is great for when you are updating many attributes</em></p>
<p>On the far right of the table of <code>shiny_attributes</code> there are 4 columns: <code>id</code>, <code>propertyURI</code>, <code>propertyLabel</code>, <code>valueURI</code>, <code>valueLabel</code> that can be filled out.</p>
</div>
</div>
<div id="annotating-sensitive-data" class="section level3 hasAnchor" number="4.7.3">
<h3><span class="header-section-number">4.7.3</span> Annotating sensitive data<a href="editing-eml.html#annotating-sensitive-data" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Sensitive datasets that might cover protected characteristics (human subjects data, endangered species locations, etc) should be annotated using the data sensitivity ontology: <a href="https://bioportal.bioontology.org/ontologies/SENSO/?p=classes&amp;conceptid=root" class="uri">https://bioportal.bioontology.org/ontologies/SENSO/?p=classes&amp;conceptid=root</a>.</p>
<div id="dataset-annotations" class="section level4 hasAnchor" number="4.7.3.1">
<h4><span class="header-section-number">4.7.3.1</span> Dataset Annotations<a href="editing-eml.html#dataset-annotations" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>As a final step in the data processing pipeline, we will categorize the dataset. We are trying to categorize datasets so we can have a general idea of what kinds of data we have at the Arctic Data Center.</p>
<p>Datasets will be categorized using the <a href="https://bioportal.bioontology.org/ontologies/ADCAD/?p=classes&amp;conceptid=root">Academic Ontology</a>. These annotations will be seen at the top of the landing page, and can be thought of as “themes” for the dataset. In reality, they are dataset-level annotations.</p>
<p>Be sure to ask your peers in the #datateam slack channel whether they agree with the themes you think best fit your dataset. Once there is consensus, use the following line of code:</p>
<div class="sourceCode" id="cb79"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb79-1"><a href="editing-eml.html#cb79-1" tabindex="-1"></a>doc <span class="ot">&lt;-</span> datamgmt<span class="sc">::</span><span class="fu">eml_categorize_dataset</span>(doc, <span class="fu">c</span>(<span class="st">&quot;list&quot;</span>, <span class="st">&quot;of&quot;</span>, <span class="st">&quot;themes&quot;</span>))</span></code></pre></div>
</div>
</div>
</div>
<div id="exercise-3a" class="section level2 exercise hasAnchor" number="4.8">
<h2><span class="header-section-number">4.8</span> Exercise 3a<a href="editing-eml.html#exercise-3a" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>The metadata for the dataset created earlier in Exercise 2 was not very complete. Here we will add a attribute and physical to our entity (the csv file).</p>
<ul>
<li>Make sure your package from <a href="#exercise-2">before</a> is loaded into R.</li>
<li>Convert <code>otherEntity</code> into <code>dataTable</code>.</li>
<li>Replace the existing <code>dataTable</code> with a new <code>dataTable</code> object with an <code>attributelist</code> you write in R using the above commands.</li>
<li>We will continue using the objects created and updated in this exercise in 3b.</li>
</ul>
<p>Below is some pseudo-code for how to accomplish the above steps. Fill in the dots according to the above sections to complete the exercise.</p>
<pre><code># get the latest version of the resource map identifier from your dataset on the arctic data center
resource_map_pid &lt;- ...
dp &lt;- getDataPackage(d1c_test, identifier=resource_map_pid, lazyLoad=TRUE, quiet=FALSE)

# get metadata pid
mo &lt;- selectMember(...)

# read in EML
doc &lt;- read_eml(getObject(...))

# convert otherEntity to dataTable
doc &lt;- eml_otherEntity_to_dataTable(...)

# write an attribute list using shiny_attributes based on the data in your file
ex_data &lt;- read.csv(...)
atts &lt;- shiny_attributes(data = ex_data)

# set the attributeList
doc$dataset$dataTable$attributeList &lt;- set_attributes(...)
</code></pre>
</div>
<div id="validate-eml-and-update-package" class="section level2 hasAnchor" number="4.9">
<h2><span class="header-section-number">4.9</span> Validate EML and update package<a href="editing-eml.html#validate-eml-and-update-package" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>To make sure that your edited EML is valid against the EML schema, run <code>eml_validate()</code> on your EML. Fix any errors that you see.</p>
<div class="sourceCode" id="cb81"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb81-1"><a href="editing-eml.html#cb81-1" tabindex="-1"></a><span class="fu">eml_validate</span>(doc)</span></code></pre></div>
<p>You should see something like if everything passes:
&gt;[1] TRUE
&gt;attr(,“errors”)
&gt;character(0)</p>
<p>Then save your EML to a path of your choice or a temp file. You will later pass this path as an argument to update the package.</p>
<div class="sourceCode" id="cb82"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb82-1"><a href="editing-eml.html#cb82-1" tabindex="-1"></a>eml_path <span class="ot">&lt;-</span> <span class="st">&quot;path/to/save/eml.xml&quot;</span></span>
<span id="cb82-2"><a href="editing-eml.html#cb82-2" tabindex="-1"></a><span class="fu">write_eml</span>(doc, eml_path)</span></code></pre></div>
</div>
<div id="exercise-3b" class="section level2 exercise hasAnchor" number="4.10">
<h2><span class="header-section-number">4.10</span> Exercise 3b<a href="editing-eml.html#exercise-3b" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<ul>
<li>Make sure you have everything from <a href="editing-eml.html#exercise-3a">before</a> in R.</li>
</ul>
<p>After adding more metadata, we want to publish the dataset onto <code>test.arcticdata.io</code>. Before we publish updates we need to do a couple checks before doing so.</p>
<ul>
<li>Validate your metadata using <code>eml_validate</code>.</li>
<li>Use the <a href="first-ticket.html#final-checklist">checklist</a> to review your submission.</li>
<li>Make edits where necessary</li>
</ul>
<p>Once <code>eml_validate</code> returns <code>TRUE</code> go ahead and run <code>write_eml</code>, <code>replaceMember</code>, and <code>uploadDataPackage</code>. There might be a small lag for your changes to appear on the website. This part of the workflow will look roughly like this:</p>
<pre><code># validate and write the EML
eml_validate(...)
write_eml(...)

# replace the old metadata file with the new one in the local package
dp &lt;- replaceMember(dp, ...)

# upload the data package
packageId &lt;- uploadDataPackage(...)</code></pre>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="exploring-eml.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="updating-a-data-package.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "section"
}
});
});
</script>

</body>

</html>
